function __localCpro(e){window.PageAds={init:function(e){this.G=e;var t="onorientationchange"in window?"orientationchange":"resize";e.Utility.bind(window,t,e.Utility.proxy(this.renderEventHandler,this))},getOrientation:function(){return void 0!=window.orientation?0==window.orientation%180?"portrait":"landscape":window.innerWidth>window.innerHeight?"landscape":"portrait"},renderEventHandler:function(){this.renderAdsTimer&&clearTimeout(this.renderAdsTimer),this.renderAdsTimer=setTimeout(this.G.Utility.proxy(this.renderAds,this),300)
},renderAds:function(){var e=this.getOrientation(),t=document.documentElement.clientWidth,n=document.documentElement.clientHeight,t="portrait"===e?t>=n?n:t:n>=t?n:t,e=Math.floor(t/160),e=e>2?2:e,t={n:"baidunews_cpr",tu:"u1246783",rsi1:65,rsi0:t,rad:1,rss0:"",rss1:"eef2f6",rss2:"0b62b2",desFC:"777777",rss6:"e10900",rsi5:1,titFS:16,desFS:14,conpl:10,at:"tuwen",cad:1,aurl:"",rss7:"ffffff",wn:1,hn:1,titSU:0,conSL:0,iteRS:20,isIE:0,titse:0};1===e&&(t.titTA="center"),this.G.BusinessLogic.pageFirstRequestTime=null,window.__bdcpro__displayTypeCounter=null,window.custInlayRender(t)
}},PageAds.init(e)}!function(e){rocket.globalview.gotop=rocket.globalview.extend({className:"gotop-globalview",events:{click:"onclick"},init:function(){var e=this;e.isEnabled=!0,e.render(),e.initGoTop()},render:function(){this.$el.appendTo("#wrapper")},initGoTop:function(){var t,n=this;e.ui.gotop(n.$el,{useAnim:!1,touchendHandler:function(){var a=this;return clearTimeout(t),window.pageYOffset>e(window).height()&&n.isEnabled?t=setTimeout(function(){a.show()},1e3):a.hide(),!1}}).fix({bottom:200,right:10})
},registerEvents:function(){var e=this;e.ec,e.on("routechange",e.onroutechange,e)},onroutechange:function(e){var t=this,n=e.from||null,a=e.to||null,i=(n&&n.action||null,a&&a.action||null);e.pageviews,t.isEnabled="managesubscribe"==i?!1:!0},onclick:function(){var e=this;e.$el.addClass("press"),setTimeout(function(){e.$el.removeClass("press")},300),_ss({act:"gotop"})}})}(Zepto),!function(){rocket.globalview.levelnav=rocket.globalview.extend({init:function(){var e=this;e.routeTrail=[],e.readConfig()
},readConfig:function(){var e=this;e.upLevelRoutePattern={index:[],searchbox:[/^index/,/^$/],search:[/^index/,/^$/,/^searchbox/,/^searchsubscribe/],page_other:[/^index/,/^$/,/^search/,/^preview/,/^topic/,/^message/,/^favor/],page_search:[/^index/,/^$/,/^search/,/^preview/,/^message/,/^favor/],page_focuspic:[/^index/,/^$/,/^preview/,/^message/,/^favor/],page_0:[/^index/,/^$/,/^search/,/^preview/,/^page\/[a-z]+/,/^message/,/^favor/],page_1:[/^index/,/^$/,/^search/,/^preview/,/^page\/[a-z]+/,/^message/,/^favor/],page_3:[/^$/,/^page\/[a-z]+/],image:[/^index/,/^page/],userhome:[/^index/,/^$/],city:[/^index/,/^$/,/^preview/],province:[/^city/,/^$/],preview_other:[/^index/,/^$/,/^subscribe/,/^searchsubscribe/,/^managesubscribe/,/^page/,/^rank/,/^preview\//],preview_forward:[/^index/,/^$/,/^subscribe/,/^searchsubscribe/,/^managesubscribe/,/^page/,/^rank/,/^preview\/[^f].+/],message:[/^index/,/^userhome/],favor:[/^index/,/^userhome/],subscribe:[/^index/,/^$/],searchsubscribe:[/^index/,/^$/,/^subscribe/,/^modelopen/],modelopen:[/^index/,/^$/,/^userhome/],managesubscribe:[/^index/,/^$/,/^subscribe/],comment:[/^index/,/^$/,/^page/],topic:[/^index/,/^$/,/^preview/],feedback:[/^index/,/^$/,/^page/,/^search/],rank:[/^index/,/^$/],album:[/^index/],trenddetail:[/^index/,/^preview/,/^page/,/^$/],trendlist:[/^trenddetail/,/^$/],trendcomment:[/^trenddetail/,/^$/]}
},registerEvents:function(){var e=this;e.ec,e.on("routechange",e.onroutechange,e)},onroutechange:function(e){var t=this,n=e.from||null,a=e.to||null;n&&n.action||null,a&&a.action||null,e.pageviews,a&&t.addRoute()},getUpLevel:function(){return this.getNearestUpLevelRoute.apply(this,arguments)},getNearestUpLevelRoute:function(e,t){if(!e)return null;var n,a=this,i=a.routeTrail;if(n=a.upLevelRoutePattern[e],!n||0==n.length)return null;t=t||0,1==(1&t)&&i.length&&i.pop();for(var o=i.length-1;o>=0;o--)if(4!=(4&t)||i[o]!=a.getCurRoute())for(var r=0;r<n.length;r++)if(n[r].test(i[o])){if(o>0&&2==(2&t)&&n[r].test(a.getCurRoute())&&n[r].test(i[o-1]))break;
return i.splice(o+1,i.length-o-1),{index:o,route:i[o]}}return null},addRoute:function(){var e=this;e.routeTrail.push(e.getCurRoute())},getCurRoute:function(){return location.hash.replace(/^#/,"")},showRouteTrail:function(){var e=this,t=e.routeTrail.length;for(console.log(""),console.log("[ route trail stack ]");t>0;)console.log("    "+e.routeTrail[t-1]),t--}})}(Zepto),!function(e){rocket.model.remotesubdata=rocket.model.extend({initialize:function(){var e=this;e.dataCache={}},saveParams:function(e){return{method:"POST",querystring:"?tn=bdapibaiyue&t=setuserdata",data:{bduss:e.bduss||"",cuid:e.cuid||"",text:e.text||"",ischeck:0,type:"tag",OS:"android",ver:6,from:"webapp",rand:(new Date).getTime()}}
},fetchParams:function(e){return{method:"POST",querystring:"?tn=bdapibaiyue&t=getuserdata",data:{bduss:e.bduss||"",cuid:e.cuid||"",type:"tag",OS:"android",ver:6,from:"webapp",rand:(new Date).getTime()}}},urlHandler:function(){var e="news.baidu.com"==location.host.toLowerCase()?"/i":"/news";return e},getData:function(){var e=this;return e.dataCache},fetch:function(t){var n=this,a=n.fetchParams(t),i=e.extend({type:"POST",url:n.urlHandler()+a.querystring,data:a.data},t);return Backbone.Model.prototype.fetch.call(n,i)
},save:function(t){var n=this,a=n.saveParams(t),i=e.extend({type:"POST",url:n.urlHandler()+a.querystring,data:a.data},t);return Backbone.Model.prototype.fetch.call(n,i)},filterData:function(e){for(var t=e.tag,n=0;n<t.length;n++)"chosen"==t[n].type&&(t[n].name="推荐"),"focus"==t[n].type&&t.splice(n,1)},parse:function(e){var t,n=this;return!e||e.errno?{}:(t=e.data,n.filterData(t),n.dataCache=t,t)}})}(Zepto),!function(){var e="NEWS_SUBSCRIBE_DATA",t="NEWS_SUBSCRIBE_PUSH_DATA",n="NEWS_SUBSCRIBE_LOGIN_PUSH_DATA";
rocket.globalview.subdata=rocket.globalview.extend({init:function(e){var t=this;t.model=new rocket.model.remotesubdata(null,e),t.data=null,t.pushSub=[{name:"图片",type:"image",id:"1"},{name:"互联网+",type:"tag"}],setTimeout(function(){t.initData()},100)},registerEvents:function(){var e=this;e.ec,e.on("routechange",e.onroutechange,e),e.model.on("sync",e.onsync,e)},isLoggedIn:function(){return webappandroid.login.isLoggedIn()},addLocalSub:function(){var e,a=this,i=webappandroid.helper.localStorageTest(),o=null,r=null,s=null;
if(i){try{r=webappandroid.helper.localStorageGet(n),o=webappandroid.helper.localStorageGet(t)}catch(c){r=null,o=null}if(s=JSON.stringify(a.pushSub),a.isLoggedIn()){if(r!==s){for(var d=a.pushSub.length-1;d>=0;d--)"图片"==a.pushSub[d].name?e=3:"互联网+"==a.pushSub[d].name&&(e=a.data.tag.length),a.addSub(a.pushSub[d],e);webappandroid.helper.localStorageSet(n,s)}}else o!==s&&(e=a.data.tag.length-1,a.addSub(a.pushSub[1],e),webappandroid.helper.localStorageSet(t,s))}},initData:function(){var e=this;e.isLoggedIn()?e.model.fetch({bduss:webappandroid.login.getBDUSS(),cuid:"1",success:function(){setTimeout(function(){e.addLocalSub()
},1e3)}}):(e.data=e.readFromLocal(),e.data?(e.addLocalSub(),e.triggerPageEvent("index,subscribe,searchsubscribe,managesubscribe,page,preview","subscribedatachange")):(e.data={tag:webappandroid.subscribe.getDefaultSubscribeData()},e.saveToLocal(),e.addLocalSub()))},getData:function(){return this.data},addSub:function(e,t,n){var a=this;a.isSubExists(e)?(a.moveSub(e.type,e.name,t),console.log("duplicated subscribe")):("number"==typeof t?a.data.tag.splice(t,0,e):("local"==e.type&&(e.name="本地"),"chosen"==e.type&&(e.name="推荐"),a.data.tag.push(e)),a.saveToLocal(),n||a.saveRemote())
},isMinimumSub:function(e){for(var t=0,n=e.length-1;n>=0;)"focus"!=e[n].type&&"beauty"!=e[n].type&&"meizitu"!=e[n].type&&t++,n--;return 2>t},removeSub:function(e,t,n){var a=this,i=a.data.tag;if(a.isMinimumSub(i))return a.tip("至少保留一个订阅项"),!1;for(var o=0;o<i.length;o++)if(i[o].type==e&&(i[o].name==t||"local"==e||"focus"==e||"chosen"==e))return i.splice(o,1),a.saveToLocal(),n||a.saveRemote(),!0;return!1},moveSub:function(e,t,n,a){for(var i,o=this,r=o.data.tag,s=0;s<r.length;s++)if(r[s].type==e&&r[s].name==t){i=r.splice(s,1),r.splice(n,0,i[0]),o.saveToLocal(),a||o.saveRemote();
break}},saveRemote:function(){var e=this;return e.isLoggedIn()?void(e.savingRemote||(e.savingRemote=!0,setTimeout(function(){e.model.save({bduss:webappandroid.login.getBDUSS(),cuid:"1",text:JSON.stringify(e.getDataToSaveRemote(e.data)),success:function(){e.savingRemote=!1}})},0))):void e.triggerPageEvent("index,subscribe,searchsubscribe,managesubscribe,page,preview","subscribedatachange")},isSubExists:function(e){for(var t=this,n=t.data.tag,a=n.length-1;a>=0;){if(n[a].name==e.name&&n[a].type==e.type&&("tag"!=e.type&&n[a].id==e.id||"tag"==e.type))return!0;
a--}return!1},readFromLocal:function(){var t=this,n=webappandroid.helper.localStorageTest(),a=null;if(n)try{a=JSON.parse(webappandroid.helper.localStorageGet(e))}catch(i){a=null}return t.fixData(a),a},fixData:function(e){if(e&&e.tag){for(var t=e.tag,n=!1,a=0;a<t.length;a++)"focus"==t[a].type&&t.splice(a,1),"chosen"==t[a].type&&(n=!0);return n||t.splice(0,0,{type:"chosen",name:"推荐"}),e}},getDataToSaveRemote:function(e){for(var t=e.tag.slice(0),n=0;n<t.length;n++)"chosen"==t[n].type&&(t[n].name="精选"),478===t[n].id&&(t[n].id="478"),"image"==t[n].type&&"1"!==t[n].id&&(t[n].id="1");
return{tag:t}},clearLocal:function(){var t=webappandroid.helper.localStorageTest();t&&webappandroid.helper.localStorageRemove(e)},saveToLocal:function(){var t=this,n=webappandroid.helper.localStorageTest(),a="";if(n)try{a=JSON.stringify(t.data),webappandroid.helper.localStorageSet(e,a)}catch(i){}},onsync:function(e){var t=this;e.attributes.tag&&(t.data=e.getData(),t.saveToLocal(),t.triggerPageEvent("index,subscribe,searchsubscribe,managesubscribe,page,preview","subscribedatachange"))},onroutechange:function(e){var t=e.from||null,n=e.to||null;
t&&t.action||null,n&&n.action||null,e.pageviews}})}(Zepto),!function(){rocket.globalview.modelopen=rocket.globalview.extend({init:function(){},registerEvents:function(){var e=this;e.ec},addModel:function(e){var t=this;t.ec,t.triggerPageEvent("modelopen","addModel",e)}})}(Zepto),!function(e){rocket.globalview.ui_shareWx=rocket.globalview.extend({init:function(t){var n=this;n.model=new rocket.model.ui_shareWx(null,e.extend({},t)),n.model.fetch({success:function(e){var e=e.toJSON();wx.config({debug:!1,appId:"wxf3c5150a1ba3beb5",timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]})
}})}})}(Zepto),!function(e){rocket.model.ui_shareWx=rocket.model.extend({initialize:function(e,t){var n=this,a=t;n.options=t,n.type=a.type},getRequestInfo:function(){var e={method:"GET",querystring:"?tn=bdapiweixin_auth&appid=wxf3c5150a1ba3beb5&url="+encodeURIComponent(location.href.split("#")[0])};return e},urlHandler:function(){var e="news.baidu.com"==location.host.toLowerCase()?"/i":"/news";return e},fetch:function(t){var n=this,a=n.getRequestInfo(n.type),i=e.extend({type:a.method,url:n.urlHandler()+(a.querystring||""),data:{}},t);
return Backbone.Model.prototype.fetch.call(n,i)}})}(Zepto),!function(e){rocket.model.area=rocket.model.extend({initialize:function(){var e=this;e.cacheData={}},urlHandler:function(){var e="news.baidu.com"==location.host.toLowerCase()?"/i":"/news";return e},getRequestInfo:function(e){return{method:"POST",querystring:"?tn=bdapibaiyue&t=getareaconf&act=get",data:{id:e.id}}},getCache:function(e){var t=this;return null!=e&&e in t.cacheData?t.cacheData[e]:null},fetch:function(t){var n=this,a=n.getRequestInfo(t),i=e.extend({type:a.method,url:n.urlHandler()+(a.querystring||""),data:a.data},t);
return Backbone.Model.prototype.fetch.call(n,i)},parse:function(e,t){var n,a=this;return e&&e.data&&!e.errno?(n=e.data,n&&t.data&&t.data.id&&(a.cacheData[t.data.id]=n),n):{}}})}(Zepto),!function(e){rocket.model.article=rocket.model.extend({initialize:function(e,t){var n=this,a=t;n.options=t,rocket.model.article._instances||(rocket.model.article._instances={}),n.type=a.type,n.id=rocket.model.article.getID(t),rocket.model.article._instances[n.id]=n},getRequestInfo:function(e){var t=this,n=webappandroid.subscribe.getNewsType(e),a={};
switch(n){case"tag":case"chosen":case"info":case"news":case"author":case"relatednews":a=t.tagRequestInfo(n);break;case"focus":case"oldfocus":case"hotnews":a=t.focusRequestInfo();break;case"focuspic":a=t.focuspicRequestInfo();break;case"local":a=t.localRequestInfo();break;case"search":a=t.searchRequestInfo();break;case"image":a=t.imageRequestInfo();break;case"favor":a=t.favorRequestInfo();break;default:a=t.defaultRequestInfo()}return a},focusRequestInfo:function(){var e=this,t=e.options;return{method:"GET",data:{tn:"bdapibody",type:1,nids:t.nid||"",category:"0"}}
},focuspicRequestInfo:function(){var e=this,t=e.options;return{method:"GET",data:{tn:"bdapibody",type:2,nids:t.nid||"",category:"0"}}},tagRequestInfo:function(){var e=this,t=webappandroid.helper.cookieGet("BAIDUID"),n=webappandroid.helper.cuidGet(),a=webappandroid.login.getBDUSS();return{method:"POST",querystring:"?tn=bdapibaiyue&t=recommendinfo",data:{baiduid:t,cuid:n,bduss:a||"",nids:e.options.nid,wf:1}}},localRequestInfo:function(){var e=this;return{method:"POST",querystring:"?tn=bdapibaiyue&t=localnewsinfo",data:{mid:"03c7a16f2e8028127e42c5f7ca9e210b",nids:e.options.nid,wf:1,ver:2}}
},searchRequestInfo:function(){var e=this,t=e.options;return{method:"GET",data:{tn:"bdapiinstantfulltext",src:t.src||""}}},imageRequestInfo:function(){var e=this,t=e.options;return{method:"POST",querystring:"?tn=bdapibaiyue&t=medianewsinfo&act=get",data:{nids:t.nid,topic:"图片",type:"image",platform:"webapp"}}},favorRequestInfo:function(){var e=this;return{method:"POST",querystring:"?tn=bdapibaiyue&t=getnewsbody&act=get",data:{from:"collect",mid:"03c7a16f2e8028127e42c5f7ca9e210b",nid:e.options.nid}}
},defaultRequestInfo:function(){var e=this,t=e.options;return t.nid?t.src&&/^http/i.test(t.src)?e.searchRequestInfo():e.tagRequestInfo():e.searchRequestInfo()},urlHandler:function(){var e="news.baidu.com"==location.host.toLowerCase()?"/i":"/news";return e},isLocalNews:function(e){return webappandroid.subscribe.isLocalNews(e||this.type)},getImages:function(){var t,n,a,i=this;return i._images?i._images:(t=i.formatData().content,n=webappandroid.subscribe.getNewsType(i.options.type),a=e.map(t,function(e,a){return"image"==e.type?("image"==n&&(e.img_txt=t[a+1]&&"text"==t[a+1].type?t[a+1].data:""),e):void 0
}),i._images=a,a)},getCount:function(){var e=this;return e._count?e._count:(e._count=e.formatData().count,e._count)},filterContent:function(e){var t=[];if(!e||!e.length)return e;for(var n=0;n<e.length;n++)"text"==e[n].type&&/^\s*<script .+/i.test(e[n].data)&&/^\s*<span .+/i.test(e[n].data)||t.push(e[n]);return t},formatData:function(){var e=this;if(e._fromatData)return e._formatData;var t,n,a,i,o=e.options,r=e.toJSON(),r=r.data&&r.data.news&&r.data.news.length?r.data.news[0]:r,s={},t=r.title||o.title,a=r.time||r.ts||o.time,c=e.formatTime(a.length<13?a+"000":a),n=r.author||r.site||o.author,i=e.filterContent(r.content),d=r.video;
return s.title=t,s.count=r.count||{},s.time=c,s.author=n,s.type=o.type,s.content=i,s.url=r.url||o.src,s.isvideo=r.isvideo,s.dataSource=e.dataSource,s.tags=r.tag||[],s.related=r.related||[],s.recommend="yaan"==o.type?[]:r.recommend||[],s.video=d,e._formatData=s,s},formatTime:function(e){var t=new Date(parseInt(e)),n=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),o=t.getHours(),r=t.getMinutes();10>o&&(o="0"+o),10>r&&(r="0"+r);var s=n+"年"+a+"月"+i+"日"+o+":"+r;return s},fetch:function(t){var n=this,a=n.getRequestInfo(n.type),i=e.extend({type:a.method,url:n.urlHandler()+(a.querystring||""),data:a.data},t);
setTimeout(function(){return Backbone.Model.prototype.fetch.call(n,i)},100)}}),rocket.model.article.getInstance=function(e){var t=rocket.model.article._instances;return t&&t[e]},rocket.model.article.getID=function(e){return e.nid||encodeURIComponent(e.src)}}(Zepto),!function(e){rocket.model.article_comment=rocket.model.extend({initialize:function(e){var t=this,n={info:!0,focus:!0,toppic:!0,push:!0,search:!0};t.options=e,t.ts=0,n[t.options.type]||(t.options.type="info")},url:function(){var e=this,t=e.options.t,n="get";
return("comment"===t||"support"===t)&&(n="post"),"/news?tn=bdapibaiyue&t="+t+"&act="+n},parse:function(e){var t=this;return e?(e.data&&e.data.hasmore&&(t.ts=e.data.comments[t.options.pn-1].ts),e):{}},fetch:function(t){var n=this,a={nid:n.options.nid,from:n.options.type,pd:"webapp"};switch(n.options.t){case"getcomments":a=e.extend(a,{order:"time",comment_id:0,pn:n.options.pn||5,ver:3,pd:"webapp",ts:n.ts||0});break;case"getcommentcount":break;case"comment":a=e.extend(a,{text:n.options.text,bduss:n.options.bduss,is_reply:n.options.is_reply,reply_id:n.options.reply_id,ver:2});
break;case"support":a=e.extend(a,{comment_id:n.options.comment_id,cuid:n.options.cuid,bduss:n.options.bduss})}var i=e.extend({type:"POST",data:a},t);return Backbone.Model.prototype.fetch.call(n,i)}})}(Zepto),!function(e){var t="NEWS_GEO_DATA",n="NEWS_GEO_OLDDATA";rocket.model.base_geo=rocket.model.extend({initialize:function(){var e=this;e.geoLoadingLock=!1,e.initGeo()},getPushGeo:function(){var e=this;webappandroid.local.getPushGeo(function(t){0==t.error?(t.coords.location,e.setGeo(t.coords.location,6)):e.getDeviceGeo()
},function(){e.getDeviceGeo()}),_ss({act:"gps_get_count"})},getDeviceGeo:function(){var e=this;webappandroid.local.callGPS(function(t){t&&(e.setGeo(t,1),webappandroid.helper.moniter("gps:",JSON.stringify(t)))})},transGeo:function(e){return e>1e3?e/1e5:e},setGeo:function(e,a,i){var o=this;o.setGeoData(e,a,i||10,t),o.setGeoData(e,a,86400,n),o.geoLoadingLock=!1,_ss({act:"gps_get_count_success",act_data_1:a})},setGeoData:function(t,n,a,i){e.localStorage(i,JSON.stringify({longitude:t.lng||t.longitude,latitude:t.lat||t.latitude,coor_type:n}),a)
},getGeo:function(){var a=this,i=e.localStorage(t);return i||a.geoLoadingLock||(a.geoLoadingLock=!0,a.getPushGeo()),i||e.localStorage(n)},initGeo:function(){var n=this;_geoData=e.localStorage(t),_geoData||n.geoLoadingLock||(n.geoLoadingLock=!0,n.getPushGeo())}})}(Zepto),!function(e){rocket.model.hotcomment=rocket.model.extend({initialize:function(){},url:function(){return"http://m.hao123.com/hao123_outapi/getBaiduNewsComment"},parse:function(e){var t=this;return t._data=null,t._dataCode=null,e&&void 0!=e.error_code&&void 0!=e.comment&&(0==e.error_code&&(t._data=e.comment),t._dataCode=e.error_code),t.trigger("databack"),e
},_handOption:function(t){var n=this;n.options=e.extend({},n.options,t),n.options.pageNum=n.options.pageNum||1,n.options.pageSize=n.options.pageSize||20,void 0==n.options.withComment&&(n.options.withComment=!0)},getRequestInfo:function(){var e,t=this,n=t.options;return null!=n&&(e={page_num:n.pageNum,page_size:n.pageSize,nid:n.nid,_t:(new Date).getTime(),with_comment:n.withComment?"1":"0"}),e},fetch:function(t){var n=this;n._handOption(t);var a=e.extend({type:"GET",dataType:"jsonp",data:n.getRequestInfo()},n.options);
return Backbone.Model.prototype.fetch.call(n,a)},getData:function(){var e=this;return((e._data||{}).data||{}||{}).list||[]},getDataTotal:function(){var e=this;return(e._data||{}).total_num||0},fetchNext:function(e,t){var n=this;t&&n._handOption(t),e=+e,(void 0==e||isNaN(e))&&(e=1);var a=n._data.total_num;if(a=+a,void 0!=a&&!isNaN(a)){var i=(n.options.pageNum,n.options.pageSize),o=Math.ceil(a/i),r=n.options.pageNum||1,s=e+r;return 1>s&&(s=1),s>o&&(s=o),s==r?void n.trigger("databack"):void n.fetch({pageNum:s})
}},dataLimit:function(){var e=this._data;return e&&e.data&&e.data.has_next_page&&e.data.list&&e.data.list.length?!1:!0}})}(Zepto),!function(e){rocket.model.article_support=rocket.model.extend({initialize:function(e,t){var n=this;n.options=t},getRequestInfo:function(e){var t=this;return{method:"POST",querystring:"?tn=bdapibaiyue&t=newssupport",data:{nid:t.options.nid||e.nid,from:2==t.options.type?"toppic":"info",cuid:webappandroid.helper.cookieGet("BAIDUID")||"",type:e&&e.supporttype||"up"}}},urlHandler:function(){var e="news.baidu.com"==location.host.toLowerCase()?"/i":"/news";
return e},fetch:function(t){var n=this,a=n.getRequestInfo(t),i=e.extend({type:a.method,url:n.urlHandler()+(a.querystring||""),data:a.data},t);return Backbone.Model.prototype.fetch.call(n,i)}})}(Zepto),!function(e){rocket.model.feedad=rocket.model.extend({initialize:function(){var e=this;e.isAdBlocked=!0},urlHandler:function(){var e="news.baidu.com"===location.host.toLowerCase()?"/i":"/news";return e},getRequestInfo:function(){return{method:"POST",querystring:"?tn=bdapimobads",data:{"class":"轮播图,正文"}}
},setIsAdBlocked:function(e){var t=this;t.isAdBlocked=e},getIsAdBlocked:function(){var e=this;return e.isAdBlocked},resetAd:function(){me.pagedataCache={},me.carouseldataCache={}},getPageFeedAdData:function(){var e=this;return e.pagedataCache},getCarouselFeedAdData:function(){var e=this;return e.carouseldataCache},parse:function(e){var t=this;return t.pagedataCache=e&&e.data&&e.data["正文"][0],t.carouseldataCache=e&&e.data&&e.data["轮播图"][0],e&&e.data},fetch:function(t){var n=this,a=n.getRequestInfo(t),i=e.extend({},t,{type:a.method,url:n.urlHandler()+(a.querystring||""),data:e.extend(a.data,{})});
return Backbone.Model.prototype.fetch.call(n,i)}}),rocket.model.feedad.hasInstance=function(){return!!rocket.model.feedad.instance},rocket.model.feedad.getInstance=function(){var e=rocket.model.feedad.hasInstance;return e()||(rocket.model.feedad.instance=new rocket.model.feedad),rocket.model.feedad.instance}}(Zepto),!function(e){rocket.model.favor=rocket.model.extend({init:function(){this.resetUserFavor()},getBDUSS:function(){return webappandroid.login.getBDUSS()},urlHandler:function(){var e="news.baidu.com"==location.host.toLowerCase()?"/i":"/news";
return e},getRequestInfo:function(t){var n=this;return{method:"POST",querystring:"?tn=bdapibaiyue&t=getcollectlist",data:e.extend({wf:0,nid:"",bduss:n.getBDUSS(),token:""},n.mgrPageInfo(t))}},getMgrRequestInfo:function(e){var t,n=this;return t="do"==n.type?{nid:e.nid,from:e.from,url:e.url,urls:"",bduss:n.getBDUSS()}:{nid:e.nid,bduss:n.getBDUSS()},{method:"POST",querystring:"?tn=bdapibaiyue&t="+("do"==n.type?"collect":"delcollect"),data:t}},mgrPageInfo:function(e){var t=this,n=e.time||0,a=e.pn||20;
return t.pn=a,{time:n,pn:a}},parse:function(e){var t,n=this;return"fetch"!=n.type?e&&0==e.errno?!0:!1:(t=e?e.data:null,(null==t||null==t.news||0!==e.errno)&&(t={hasmore:!1,news:[]}),n.isDataLimit=t.news.length<(n.pn||1)||!t.hasmore?!0:!1,t.news&&t.news.length&&n.setUserFavors(t.news),n._hasGottenUesrFavor=!0,t)},isHasMore:function(){return this.isDataLimit},checkParam:function(){return null==this.getBDUSS()?!1:!0},fetch:function(t){var n=this,a=n.getRequestInfo(t),i=e.extend({},t,{type:a.method,url:n.urlHandler()+(a.querystring||""),data:a.data});
return n.checkParam()?(n.type="fetch",Backbone.Model.prototype.fetch.call(n,i)):void 0},doFavor:function(t){var n,a,i=this;return i.checkParam()?(i.type="do",n=i.getMgrRequestInfo(t),a=e.extend({},t,{type:n.method,url:i.urlHandler()+(n.querystring||""),data:n.data}),i.setUserFavors(n.data.nid),Backbone.Model.prototype.fetch.call(i,a)):void 0},unFavor:function(t){var n,a,i=this;return i.checkParam()?(i.type="undo",n=i.getMgrRequestInfo(t),a=e.extend({},t,{type:n.method,url:i.urlHandler()+(n.querystring||""),data:n.data}),i.delUserFavor(n.data.nid),Backbone.Model.prototype.fetch.call(i,a)):void 0
}}),rocket.model.favor=rocket.model.favor.extend({setChanged:function(e){this._favorchanged=e},getChangedOnce:function(){var e=!!this._favorchanged;return this.setChanged(!1),e},getUserFavors:function(){var e=this;return e.getBDUSS(),this._userFavors||{}},checkHaveGotten:function(){return!!this._hasGottenUesrFavor},checkIsFavored:function(e){var t=this,n=t.getUserFavors();return n&&null!=e?n.hasOwnProperty(e):!1},setUserFavors:function(e){var t=this;if(t.getBDUSS()!==t._userBDUSS&&t.resetUserFavor(),null!=e){if("string"==typeof e)return void t.addOneFavor(e);
if(e.length>0)for(var n in e)t.addOneFavor(e[n].nid)}},addOneFavor:function(e){var t=this;t._userFavors.hasOwnProperty(e)||(t.setChanged(!0),t._userFavors[e]=!0)},delUserFavor:function(e){var t=this,n=t.getUserFavors();n&&null!=e&&n.hasOwnProperty(e)&&(n[e]=null,delete n[e],t.setChanged(!0))},resetUserFavor:function(){var e=this;e.setChanged(!0),e._userFavors={},e._userBDUSS=e.getBDUSS(),e._hasGottenUesrFavor=!1}}),rocket.model.favor.hasInstance=function(){return!!rocket.model.favor.instance},rocket.model.favor.getInstance=function(){var e=rocket.model.favor.hasInstance;
return e()||(rocket.model.favor.instance=new rocket.model.favor),rocket.model.favor.instance}}(Zepto),!function(e){var t="27c40676446aa36d331c6256e164d5ea";rocket.model.geo=rocket.model.extend({isGPS:function(e){var e,t=this;return e=e||t.options,e&&e.location?!0:!1},url:function(){var e=this;return e.isGPS()?"http://api.map.baidu.com/geocoder/v2/":"http://api.map.baidu.com/location/ip"},getRequestInfo:function(){var e,n=this;return e=n.isGPS()?{ak:t,location:n.options.location,output:"json",pois:"0",coordtype:"wgs84ll"}:{ak:t,coor:"wgs84ll"}
},fetch:function(t){var n,a=this;return a.options=t,n=e.extend({type:"GET",dataType:"jsonp",data:a.getRequestInfo()},t),Backbone.Model.prototype.fetch.call(a,n)},parse:function(e,t){var n,a,i=this,o={};return!e||e.status?o:(n=i.isGPS(t&&t.data),o.type=n?"gps":"ip",n?e.result&&e.result.addressComponent&&(a=e.result.addressComponent,o.province=a.province,o.city=a.city,o.cityCode=e.result.cityCode,o.district=a.district,o.street=a.street,o.street_number=a.street_number,o.business=e.result.business,o.location=e.result.location,o.coordtype=t.data.coordtype):e.content&&e.content.address_detail&&(o.city=e.content.address_detail.city,o.province=e.content.address_detail.province,o.cityCode=e.content.address_detail.city_code),o)
}})}(Zepto),!function(e){rocket.model.message=rocket.model.extend({init:function(){this._commentchanged=!0,this._noticechanged=!0},getBDUSS:function(){return webappandroid.login.getBDUSS()},getCuid:function(){return webappandroid.helper.cuidGet()},urlHandler:function(){var e="news.baidu.com"==location.host.toLowerCase()?"/i":"/news";return e},getCommentRequestInfo:function(){var t=this;return{method:"POST",querystring:"?tn=bdapibaiyue&t=getusercomment",data:e.extend({cuid:t.getCuid()||"1",bduss:t.getBDUSS(),ts:t.commnetDataTS||0})}
},getNoticeRequestInfo:function(){var e=this;return{method:"POST",querystring:"?tn=bdapibaiyue&t=getuserfeed",data:{cuid:e.getCuid()||"1",bduss:e.getBDUSS(),ts:e.noticeDataTS||0}}},getUserUnreadCountRequestInfo:function(){var e=this;return{method:"POST",querystring:"?tn=bdapibaiyue&t=getuserunreadcount",data:{cuid:e.getCuid()||"1",bduss:e.getBDUSS()}}},parse:function(e){var t,n=this;return t=e?e.data:null,"unreadcount"!=n.type&&((null==t||null==t.list||0!==e.errno)&&(t={hasmore:!1,list:[],errno:e.errno}),n.isDataLimit=t.list.length<20||!t.hasmore?!0:!1,"notice"==n.type?n.noticeDataTS=t.st||t.ts||n.noticeDataTS:n.commnetDataTS=t.st||t.ts||n.commnetDataTS),t
},isHasMore:function(){return this.isDataLimit},checkParam:function(){return null==this.getBDUSS()?!1:!0},fetch:function(t){var n,a,i=this;return i.type=t.type,"unreadcount"!=i.type?(n="notice"==t.type?i.getNoticeRequestInfo(t):i.getCommentRequestInfo(t),a=e.extend({},t,{type:n.method,url:i.urlHandler()+(n.querystring||""),data:n.data})):(n=i.getUserUnreadCountRequestInfo(t),a=e.extend({},t,n,{type:n.method,url:i.urlHandler()+(n.querystring||"")})),i.checkParam()?Backbone.Model.prototype.fetch.call(i,a):void 0
},setNoticeChanged:function(e){this._noticechanged=e},getNoticeChangedOnce:function(){var e=!!this._noticechanged,t=this;return this._noticechanged=!1,t.noticeDataTS=0,e}}),rocket.model.message.hasInstance=function(){return!!rocket.model.message.instance},rocket.model.message.getInstance=function(){var e=rocket.model.message.hasInstance;return e()||(rocket.model.message.instance=new rocket.model.message),rocket.model.message.instance}}(Zepto),!function(e){rocket.model.gps=rocket.model.extend({initialize:function(){var e=this;
e.dataCache={}},requestParams:function(){var e=this;return{ak:"27c40676446aa36d331c6256e164d5ea",location:e.get("mcx")+","+e.get("mcy"),coordtype:"bd09mc",output:"json",pois:0}},url:function(){return"http://api.map.baidu.com/geocoder/v2/"},fetch:function(t){var n=this,a=e.extend({type:"GET",dataType:"jsonp",data:n.requestParams()},t);return Backbone.Model.prototype.fetch.call(n,a)},parse:function(e){var t,n=this;return!e||e.status?{}:(t=e.result,n.dataCache=t,t)}})}(Zepto),!function(e){rocket.model.localid=rocket.model.extend({initialize:function(){var e=this;
e.dataCache={}},requestParams:function(){var e=this;return{province:e.get("province"),city:e.get("city"),county:e.get("county")}},url:function(){var e;return e="news.baidu.com"==location.host.toLowerCase()?"/i":"/news",e+"?tn=bdapibaiyue&t=getlocalid&act=get"},fetch:function(t){var n=this,a=e.extend({type:"POST",data:n.requestParams()},t);return Backbone.Model.prototype.fetch.call(n,a)},parse:function(e){var t,n=this;return!e||e.errno?{}:(t=e.data,n.dataCache=t,t)}})}(Zepto),!function(e){rocket.model.lottery=rocket.model.extend({initialize:function(e,t){var n=this;
n.options=t,n.data_cache={}},getRequestInfo:function(){return{method:"GET",querystring:"http://www.lecai.com/api/baidu/draw_newsh5_1.php"}},randomNoRepeat:function(e,t){for(var n=new Array,a=0;e>a;a++)n[a]=a+1;return n.sort(function(){return.5-Math.random()}),n.slice(0,t)},getRandomNumber:function(){var e=this;return[e.randomNoRepeat(33,6),e.randomNoRepeat(16,1)]},getAgentId:function(e){return"page"==e?5541:5542},getSoccerUrl:function(e,t){var n=this,a=n.data_cache.soccer,i=n.getAgentId(e);return"http://touch.lecai.com/?agentId="+i+'#path=page%2Fnbet/?lotype=JCZQ_SPF_WRQ&gate=FD&fastBet=[["'+a.match_num+'",["'+(t||-1)+'"]]]'
},getBothColorUrl:function(e){var t=this,n=t.getAgentId(e);return"http://touch.lecai.com/?agentId="+n+"#path=page%2Fbet/?lotype=SSQ&ptype=SSQ_DS&wxBet="+JSON.stringify(t.data_cache.bothColor.randomNumber)},parse:function(e){var t=this;return t.data_cache.bothColor=e[0],t.data_cache.bothColor.randomNumber=t.getRandomNumber(),t.data_cache.soccer=e[3][0],e},sync:function(t,n,a){var i=_.extend({dataType:"jsonp",processData:!1,callback:"baidulecai"},a);return e.ajax(i)},fetch:function(t){var n=this,a=n.getRequestInfo(),i=e.extend({type:a.method,url:a.querystring+"?callback=?",data:a.data},t);
return Backbone.Model.prototype.fetch.call(n,i)}})}(Zepto),!function(e){rocket.model.news=rocket.model.extend({initialize:function(e,t){var n=this;rocket.model.news._instances||(rocket.model.news._instances={}),n.type=(t||{}).type||"chosen",rocket.model.news._instances[n.type]=n,n.topPicCache=[],n.focusPicCache=[],n.topNewsCache=[],n.nidCache=[],n.dataCache=[]},getRequestInfo:function(e){var t=this,n=webappandroid.subscribe.getNewsType(e),a={};switch(n){case"chosen":a=t.chosenRequestInfo(n),t.type="chosen:推荐";
break;case"tag":case"info":a=t.tagRequestInfo(n);break;case"image":a=t.imageRequestInfo(n);break;case"news":case"newsman":a=t.subscribeRequestInfo(n);break;case"local":a=t.localRequestInfo();break;case"author":a=t.authorRequestInfo();break;case"search":a=t.searchRequestInfo();break;case"focus":case"oldfocus":a=t.focusRequestInfo();break;case"forward":a=t.forwardRequestInfo();break;default:a=t.chosenRequestInfo(),t.type="chosen:推荐"}return a},focusRequestInfo:function(){var e=this;return e.isCacheEmpty()?{method:"GET",data:{tn:"bdapilist",category:0,ln:200,an:20,from:"news_webapp",soe:1,random:(new Date).getTime()}}:{method:"GET",data:{tn:"bdapirecommend",category:0,nids:"",wf:0,ts:"",from:"news_webapp",soe:1,random:(new Date).getTime()}}
},forwardRequestInfo:function(){var e=this,t=webappandroid.subscribe.getSubscribeId(e.type);return e.isCacheEmpty()?{method:"POST",querystring:"?tn=bdapibaiyue&t=mediarankforwardednews",data:{mid:"03c7a16f2e8028127e42c5f7ca9e210b",nid:t}}:{method:"POST",querystring:"?tn=bdapibaiyue&t=recommendinfo",data:{mid:"03c7a16f2e8028127e42c5f7ca9e210b",nids:"",wf:0}}},chosenRequestInfo:function(){var t,n=this,a=webappandroid.helper.cookieGet("BAIDUID"),i=webappandroid.helper.cuidGet(),o=webappandroid.login.getBDUSS();
return t=90==window.orientation?2:1,a||setTimeout(function(){_ss({act:"new_comer",act_data_1:n.type})},100),{method:"POST",querystring:"?tn=bdapibaiyue&t=newchosenlist",data:{mid:a||"webapp-recommend",cuid:i,bduss:o||"",ln:20,wf:0,action:n.isCacheEmpty()?1:0,down:0,display_time:n.getOldestPulltime(),withtoppic:1,baiduid:a||"webapp-recommend",orientation:t,from:"news_webapp",pd:"webapp",os:e.os.iphone?"iphone":"android"}}},localRequestInfo:function(){var e=this;return e.isCacheEmpty()?{method:"POST",querystring:"?tn=bdapibaiyue&t=localnewslist",data:{mid:"03c7a16f2e8028127e42c5f7ca9e210b",loc:webappandroid.conf.getLocalId(e.type),ln:200,an:20,wf:0,ver:2,pd:"webapp",from:"news_webapp"}}:{method:"POST",querystring:"?tn=bdapibaiyue&t=localnewsinfo",data:{mid:"03c7a16f2e8028127e42c5f7ca9e210b",nids:"",wf:0,ver:2}}
},tagRequestInfo:function(e){var t=this,n=webappandroid.subscribe.getSubscribeName(t.type);return"chosen"==e&&"推荐"==n&&(n="精选"),t.isCacheEmpty()?{method:"POST",querystring:"?tn=bdapibaiyue&t=recommendlist",data:{mid:"03c7a16f2e8028127e42c5f7ca9e210b",ts:0,topic:n,type:e,token:e,ln:200,an:20,withtopic:0,wf:0,"internet-subscribe":0,ver:4,pd:"webapp"}}:{method:"POST",querystring:"?tn=bdapibaiyue&t=recommendinfo",data:{mid:"03c7a16f2e8028127e42c5f7ca9e210b",nids:"",wf:0}}},imageRequestInfo:function(e){var t=this,n=webappandroid.subscribe.getSubscribeName(t.type);
return"chosen"==e&&"推荐"==n&&(n="精选"),t.isCacheEmpty()?{method:"POST",querystring:"?tn=bdapibaiyue&t=medianewslist&act=get",data:{mid:"03c7a16f2e8028127e42c5f7ca9e210b",ts:0,topic:"图片",type:"image",token:"image",ln:200,an:10,withtopic:0,wf:0,"internet-subscribe":0,ver:4,platform:"webapp"}}:{method:"POST",querystring:"?tn=bdapibaiyue&t=medianewsinfo&act=get",data:{mid:"03c7a16f2e8028127e42c5f7ca9e210b",nids:"",wf:0,ver:2,type:"image",platform:"webapp"}}},subscribeRequestInfo:function(e){var t=this,n=webappandroid.subscribe.getSubscribeId(t.type),a=null,i=null;
return t.isCacheEmpty()?(i={os:"android",ts:0,sourceid:n,installmentid:0,ln:200,an:20,wf:0,ver:3},"newsman"===e&&(i.from="newsman"),a={method:"POST",querystring:"?tn=bdapibaiyue&t=subscribenewslist",data:i}):(i={mid:"03c7a16f2e8028127e42c5f7ca9e210b",nids:"",wf:0,ver:2},i.from="newsman"===e?"newsman":"mediarank",a={method:"POST",querystring:"?tn=bdapibaiyue&t=recommendinfo",data:i}),a},authorRequestInfo:function(){var e=this,t=webappandroid.subscribe.getSubscribeId(e.type);return{method:"POST",querystring:"?tn=bdapibaiyue&t=getcolumnnews",data:{rn:20,id:t,wf:0,time:0}}
},searchRequestInfo:function(){var e=this,t=webappandroid.subscribe.getSubscribeName(e.type);return{method:"POST",querystring:"?tn=bdapibaiyue&t=searchnews&act=get",data:{word:t,rn:20,pn:e.getNewsCount()}}},urlHandler:function(){var e="news.baidu.com"==location.host.toLowerCase()?"/i":"/news";return e},isLocalNews:function(e){return webappandroid.subscribe.isLocalNews(e||this.type)},getNewsList:function(e){return e.news&&e.news.length?e.news:e.column&&e.column.length&&e.column[0].news?e.column[0].news:[]
},hasRawNID:function(e){for(var t=0;t<e.length;t++)if(e[t].nid&&!e[t].title)return t;return-1},cacheNIDS:function(e){var t,n=this,a=n.getNewsList(e);if((t=n.hasRawNID(a))>=0)for(var i=t;i<a.length;i++)n.nidCache.push(a[i].nid)},getNIDS:function(e){var t=this,n=t.nidCache,a="";if(e=20*Math.ceil(e/20)-20,0>e)return a;for(var i=e,o=0;20>o&&i<n.length;i++,o++)a+=","+n[i];return a},isCacheEmpty:function(){return 0==this.dataCache.length},cacheFocusPic:function(e){var t=this;e.focus_pic&&e.focus_pic.length&&(t.focusPicCache=e.focus_pic)
},cacheTopPic:function(e){var t=this;e.toppic&&e.toppic.length&&(t.topPicCache=e.toppic)},cacheTopNews:function(e){var t,n=this;if(e.top&&e.top.length){t=n.topNewsCache=e.top;for(var a=0;a<t.length;a++)t[a].istopnews=!0}},cacheData:function(e){var t=this,n=t.dataCache,a=t.getNewsList(e);t.dataTS=e.st||e.ts||t.dataTS;for(var i=0;20>i&&i<a.length&&a[i].title;i++)a[i].index=n.length,n.push(a[i])},getOldestPulltime:function(){var e=this.dataCache;return e.length?e[e.length-1].pulltime:0},getFocusPic:function(){return this.focusPicCache
},getTopPic:function(){return this.topPicCache},getTopNews:function(){return this.topNewsCache},getNews:function(e,t){return this.dataCache.slice(e,e+t)},getNewsByNID:function(e){for(var t=this,n=t.topNewsCache.concat(t.dataCache),a=0;a<n.length;a++)if(n[a].nid==e)return n[a];return null},getNextNews:function(e){for(var t=this,n=t.topNewsCache.concat(t.dataCache),a=-1,i=0;i<n.length;i++)n[i].nid==e&&(a=i);return"ads_feed"===n[a+1].type&&(a=++a),a>=0&&a+1<n.length?"z"!=n[a+1].type?n[a+1]:t.getNextNews(n[a+1].nid):null
},getPrevNews:function(e){for(var t=this,n=t.topNewsCache.concat(t.dataCache),a=-1,i=0;i<n.length;i++)n[i].nid==e&&(a=i);return"ads_feed"===n[a-1].type&&(a=--a),a-1>=0?"z"!=n[a-1].type?n[a-1]:t.getPrevNews(n[a-1].nid):null},getNewsCount:function(){return this.dataCache.length},dataLimit:function(){return this.getNewsCount()>=200||this.isDataLimit},loadMoreNews:function(t){var n=this;n.dataLimit()||n.fetch({startIndex:n.getNewsCount(),success:function(){e.isFunction(t)&&t()}})},fetch:function(t){var n=this,a=n.getRequestInfo(n.type),i=e.extend({type:a.method,url:n.urlHandler()+(a.querystring||""),data:e.extend(a.data,{nids:n.getNIDS(t.startIndex||0),ts:n.dataTS,time:n.dataTS})},t);
setTimeout(function(){return Backbone.Model.prototype.fetch.call(n,i)},100)},parse:function(e){var t,n=this;return!e||e.errno?(n.isDataLimit=!0,n.trigger("change",n),{}):(t=e.data||e,n.isDataLimit="undefined"==typeof t.hasmore&&t.news&&t.news.length<20||t.column&&t.column.length&&t.column[0].news.length<20||t.hasmore===!1?!0:!1,n.cacheData(t),n.cacheNIDS(t),n.cacheFocusPic(t),n.cacheTopPic(t),n.cacheTopNews(t),t)}}),rocket.model.news.getInstance=function(e){var t=rocket.model.news._instances;return t&&t[e]
}}(Zepto),!function(e){rocket.model.suggestion=rocket.model.extend({initialize:function(){},urlHandler:function(){var e="news.baidu.com"==location.host.toLowerCase()?"/i":"/news";return e},getRequestInfo:function(e){return{method:"POST",querystring:"?tn=bdapibaiyue&t=suggestion&act=get",data:{ver:3,wd:e.wd}}},fetch:function(t){var n=this,a=n.getRequestInfo(t),i=e.extend({type:a.method,url:n.urlHandler()+(a.querystring||""),data:a.data},t);return Backbone.Model.prototype.fetch.call(n,i)},parse:function(e){var t;
return e&&e.data&&!e.errno?t=e.data:{}}})}(Zepto),!function(e){rocket.model.channeltoppic=rocket.model.extend({initialize:function(e,t){var n=this;rocket.model.channeltoppic._instances||(rocket.model.channeltoppic._instances={}),rocket.model.channeltoppic._instances[n.type]=n,n.type=(t||{}).type||"chosen",n.channelTopPicCache=[],n.dataCache=[]},getRequestInfo:function(){var e=this,t=webappandroid.subscribe.getSubscribeName(e.type);return e.isCacheEmpty()?{method:"POST",querystring:"?tn=bdapibaiyue&t=medianewslist&act=get",data:{mid:"03c7a16f2e8028127e42c5f7ca9e210b",ts:0,topic:t,type:"image",token:"image",ln:3,an:10,withtopic:0,wf:0,"internet-subscribe":0,ver:4,platform:"webapp"}}:{method:"POST",querystring:"?tn=bdapibaiyue&t=medianewsinfo&act=get",data:{mid:"03c7a16f2e8028127e42c5f7ca9e210b",nids:"",wf:0,ver:2,type:"image",platform:"webapp"}}
},isCacheEmpty:function(){return 0==this.dataCache.length},cacheChannelTopPic:function(t){var n=this,a=new Date,i=t.time||a.getTime();t.news&&t.news.length&&e.each(t.news,function(e,t){i-t.ts<1728e5&&n.channelTopPicCache.push(t)})},urlHandler:function(){var e="news.baidu.com"==location.host.toLowerCase()?"/i":"/news";return e},getChannelTopPic:function(){return this.channelTopPicCache},fetch:function(t){var n=this,a=n.getRequestInfo(),i=e.extend({type:a.method,url:n.urlHandler()+(a.querystring||""),data:a.data},t);
setTimeout(function(){return Backbone.Model.prototype.fetch.call(n,i)},100)},parse:function(e){var t,n=this;return!e||e.errno?(n.trigger("change",n),{}):(t=e.data||e,n.cacheChannelTopPic(t),t)}}),rocket.model.channeltoppic.getInstance=function(e){var t=rocket.model.channeltoppic._instances;return t&&t[e]}}(Zepto),!function(e){rocket.model.relatednews=rocket.model.extend({initialize:function(e,t){var n=this;rocket.model.relatednews._instances||(rocket.model.relatednews._instances={}),n.type=(t||{}).type||"chosen",n._uid=webappandroid.helper.cookieGet("BAIDUID"),n._cuid=webappandroid.helper.cuidGet(),n._bduss=webappandroid.login.getBDUSS(),rocket.model.relatednews._instances[n.type]=n,n.nidCache=[],n.nidCache.pointer=0,n.an=5,n.dataCache=[]
},getRequestInfo:function(e){var t=this,n=webappandroid.subscribe.getNewsType(e),a={};switch(n){case"tag":case"info":a=t.tagRequestInfo(n)}return a},tagRequestInfo:function(){var e=this;return webappandroid.subscribe.getSubscribeName(e.type),e.isCacheEmpty()?{method:"POST",querystring:"?tn=bdapibaiyue&t=relatednewslist&act=get",data:{cuid:e._cuid,bduss:e._bduss,baiduid:e._uid,ln:30,an:e.an,from:"webapp"}}:{method:"POST",querystring:"?tn=bdapibaiyue&t=relatednewsinfo&act=post",data:{cuid:e._cuid,bduss:e._bduss,baiduid:e._uid,ln:30,an:e.an,from:"webapp"}}
},urlHandler:function(){var e="news.baidu.com"==location.host.toLowerCase()?"/i":"/news";return e},getNewsList:function(e){return e.news&&e.news.length?e.news:e.column&&e.column.length&&e.column[0].news?e.column[0].news:[]},hasRawNID:function(e){for(var t=0;t<e.length;t++)if(e[t].nid&&!e[t].title)return t;return-1},isDisableLoadmore:function(){return this.nidCache.length<=0},cacheNIDS:function(e){var t,n=this,a=n.getNewsList(e);if((t=n.hasRawNID(a))>=0)for(var i=t;i<a.length;i++)n.nidCache.push({nid:a[i].nid,ext:a[i].ext,mark:a[i].mark})
},getNidsExt:function(e){for(var t=[],n=0;n<e.length;n++)t.push({nid:e[n].nid,ext:e[n].ext,mark:e[n].mark});return t},isCacheEmpty:function(){return 0==this.dataCache.length},cacheData:function(e){for(var t=this,n=t.dataCache,a=t.getNewsList(e),i=0;30>i&&i<a.length&&a[i].title;i++)a[i].index=n.length,n.push(a[i])},getNews:function(e,t){return this.dataCache.slice(e,e+t)},getNewsByNID:function(e){for(var t=this,n=t.topNewsCache.concat(t.dataCache),a=0;a<n.length;a++)if(n[a].nid==e)return n[a];return null
},getNextNews:function(e){for(var t=this,n=t.topNewsCache.concat(t.dataCache),a=-1,i=0;i<n.length;i++)n[i].nid==e&&(a=i);return a>=0&&a+1<n.length?"z"!=n[a+1].type?n[a+1]:t.getNextNews(n[a+1].nid):null},getPrevNews:function(e){for(var t=this,n=t.topNewsCache.concat(t.dataCache),a=-1,i=0;i<n.length;i++)n[i].nid==e&&(a=i);return a-1>=0?"z"!=n[a-1].type?n[a-1]:t.getPrevNews(n[a-1].nid):null},getNewsCount:function(){return this.dataCache.length},dataLimit:function(){var e=this;return e.nidCache.pointer>=e.nidCache.length||this.isDataLimit
},loadMoreNews:function(t){var n=this,a=n.nidCache.pointer,i=n.getRequestInfo(n.type),o={nids:n.nidCache&&JSON.stringify(n.nidCache.slice(a,a+n.an))},r=e.extend(i.data,o),s=e.extend({type:i.method,url:n.urlHandler()+(i.querystring||""),data:r},t);n.nidCache.pointer+=n.an,setTimeout(function(){return Backbone.Model.prototype.fetch.call(n,s)},500)},fetch:function(t){var n=this,a=n.getRequestInfo(n.type),i=e.extend(a.data,{nid:t.nid}),o=e.extend({type:a.method,url:n.urlHandler()+(a.querystring||""),data:i},t);
setTimeout(function(){return Backbone.Model.prototype.fetch.call(n,o)},500)},parse:function(e){var t,n=this;return!e||e.errno?(n.isDataLimit=!0,n.trigger("change",n),{}):(t=e.data||e,n.isDataLimit="undefined"==typeof t.hasmore&&t.news&&t.news.length<5||t.column&&t.column.length&&t.column[0].news.length<5||t.hasmore===!1?!0:!1,n.cacheData(t),n.cacheNIDS(t),t)}}),rocket.model.relatednews.getInstance=function(e){var t=rocket.model.relatednews._instances;return t&&t[e]}}(Zepto),!function(e){rocket.model.userinfo=rocket.model.extend({initialize:function(){var e=this;
e.dataCache={}},url:function(){return"http://passport.baidu.com/?checkuser"},fetch:function(t){var n=this,a=e.extend({type:"GET",dataType:"jsonp"},t);return Backbone.Model.prototype.fetch.call(n,a)},parse:function(e){return!e||e.bdErrCode-0?{}:e}})}(Zepto),!function(e){var t={};rocket.model.hotword=rocket.model.extend({initialize:function(){this.cacheData=t},url:function(){return"/news?tn=bdapipchot"},parse:function(e){var t=this;return t.cacheData[t.options.subtype]=e&&e.data&&!e.errno?e.data:[],t.dataBack(),{}
},getSubType:function(e){switch(e){case"国际":return 1;case"国内":return 2;case"体育":return 3;case"娱乐":return 4;case"社会":return 5;case"财经":return 6;case"军事":return 14;default:return 0}},dataBack:function(){var e=this;window.setTimeout(function(){var t=e.cacheData&&e.cacheData[e.options.subtype];t&&t.length&&(t=t.sort(function(){return Math.random()>.5?-1:1}),t=t.slice(0,10)),e.trigger("databack",t||[])},10)},getRequestInfo:function(){var e,t=this,n=t.options||{};return null!=n&&(e={m:"rddata",v:"hot_word",type:t.options.subtype||0,date:n.date||"",_t:(new Date).getTime()}),e
},fetch:function(t){var n=this;if(n.options=e.extend({},n.options,t),n.options.subtype=n.getSubType(t.subname),n.cacheData&&n.cacheData[n.options.subtype])return void n.dataBack();var a=e.extend({},n.options,{type:"GET",data:n.getRequestInfo()});return Backbone.Model.prototype.fetch.call(n,a)}})}(Zepto),!function(e){rocket.model.userinfo2=rocket.model.extend({initialize:function(){},url:function(){var e="news.baidu.com"==location.host.toLowerCase()?"/i":"/news";return e+"?tn=bdapipassport"},fetch:function(t){var n=this,a=e.extend({type:"GET",url:n.url(),data:{_t:(new Date).getTime()}},t);
return Backbone.Model.prototype.fetch.call(n,a)},parse:function(e){return e&&0==e.errno&&e.data?e.data:{}}})}(Zepto),!function(e){e.extend(rocket,{init:function(){function t(){setTimeout(function(){e("body").height(800),window.scrollTo(0,0),e("body").height(e(window).height())},1e3)}rocket.$globalLoading=e("#wrapper .global-loading"),rocket.$pageLoading=e("#wrapper .page-loading"),webappandroid.conf.initNoImageMode(),webappandroid.local.syncCityInfo(),top!=self&&(top.location.href=self.location.href);
var n=rocket.model.feedad.getInstance();n.setIsAdBlocked(!0);var a=new Image;a.onload=function(){n.setIsAdBlocked(!1)},a.src="http://ubmcmm.baidustatic.com/media/v1/0f000KnIgASQWwqa6sr0l0.png";var i=new rocket.router.webappandroid;new rocket.globalview.gotop({},i),webappandroid.levelnav=new rocket.globalview.levelnav({},i),webappandroid.subdata=new rocket.globalview.subdata({},i),webappandroid.modelopenglobalview=new rocket.globalview.modelopen({},i),webappandroid.audioPlayer=null,AudioEngine.isSupported()&&(webappandroid.audioPlayer=new rocket.globalview.audioplayer({engine:new AudioEngine},i)),Backbone.history.start(),e(function(){t(),/fr=mohome/.test(location.search)&&/^$|#(index)?/.test(location.hash)&&_ss({act:"mohome_open_index"})
});var o=setTimeout(function(){webappandroid.helper.getCuid(function(t){_ss({act:"single_user_cuid",act_data_1:0==t.error?"emptyCuid":"hasCuid"}),0==t.error&&e.localStorage("NEWS_CUID",t)}),webappandroid.helper.isFromPassport()&&webappandroid.login.isLoggedIn()&&_ss({act:"newsuser",act_data_1:"loginsuccess"}),_ss({act:"bduss",bduss:webappandroid.login.getBDUSS()||""}),window.clearTimeout(o)},1e3);new rocket.globalview.ui_shareWx({},i)}})}(Zepto),!function(){function e(e){return"undefined"==typeof e?"":parseInt(Backbone.VERSION)<1?decodeURIComponent(e):e
}rocket.router.webappandroid=rocket.router.extend({routes:{"":"index",index:"index","index/":"index","index/:type":"index","listing/":"index",listing:"index",userhome:"userhome","listing/:type":"index","page/:type/:src/:title/:author/:time/:nid":"page","page/:type/:src/:title/:author/:time":"page","page/:type/:src/:nid":"page","page/:type/:src":"page","image/:type/:src/:index/:url":"image","image/:type/:src/:index":"image","image/:type/:src":"image","album/:type/:nid":"album","comment/:type/:nid/:focus":"comment","search/:word/:order":"search","search/:word":"search",searchbox:"searchbox",city:"city","province/:pid/:pname":"province",product:"product",feedback:"feedback","preview/:type":"preview",favor:"favor","favor/:type":"favor",message:"message","message/:type":"message",subscribe:"subscribe",searchsubscribe:"searchsubscribe","searchsubscribe/:type":"searchsubscribe",searchmodel:"searchmodel","searchmodel/:type":"searchmodel",managesubscribe:"managesubscribe","topic/:topicId":"topic","rank/:type":"rank","rank:scope/:type":"rank","rank:scope/:type/:word":"rank","rank:scope/:type/:word/:category":"rank","_http*path":"_httpRedirect","trenddetail/:pid":"trenddetail","trendlist/:pid/:bid":"trendlist","trendcomment/:title/:pid/:tid":"trendcomment",modelopen:"modelopen","modelopen/:type":"modelopen","*defaultUrl":"defaultRoute"},pageOrder:["userhome","index","product","feedback","searchbox","search","subscribe","searchsubscribe","managesubscribe","topic","message","favor","rank","preview","page","image","album","city"],enablePositionRestore:!0,defaultPageTransition:"simple",pageTransition:{"index-userhome":"slide","index-subscribe":"slide","index-searchbox":"slide"},init:function(){var e=navigator.userAgent;
/Chrome/.test(e)||/iPhone/.test(e)||(this.pageTransition={})},index:function(t){(!t||/^focus/.test(t))&&(t="chosen"),this.doAction("index",{type:e(t)},{params:{act_data_1:t}})},userhome:function(){this.doAction("userhome",{})},preview:function(e){(!e||/^focus/.test(e))&&(e="chosen"),this.doAction("preview",{type:e},{params:{act_data_1:e}})},message:function(e){this.doAction("message",{type:e},{params:{act_data_1:e}})},favor:function(e){this.doAction("favor",{type:e},{params:{act_data_1:e}})},subscribe:function(){this.doAction("subscribe",{})
},page:function(t,n,a,i,o,r){var s=r&&r.match(/^\d+/);s&&s.length>0&&(r=s[0]),this.doAction("page",{type:e(t),src:e(n),title:e(a),author:e(i),time:e(o),nid:e(r)},{params:{act_data_1:t}})},image:function(t,n,a,i){var o="",r=a||0,i=i||"";n.match(/^\d+/)&&(o=n,n=""),this.doAction("image",{type:e(t),src:e(n),nid:e(o),index:e(r),url:e(i)},{params:{act_data_1:t}})},album:function(t,n,a){var i="",o=a||0;n.match(/^\d+/)&&(i=n,n=""),this.doAction("album",{type:e(t),src:e(n),nid:e(i),index:e(o)},{params:{act:"album",act_data_1:t}})
},comment:function(t,n,a){t||(t="info"),this.doAction("comment",{type:e(t),nid:e(n),focus:e(a)})},search:function(t,n){this.doAction("search",{word:e(t),order:e(n)},{params:{act_data_1:t}})},searchbox:function(){this.doAction("searchbox",{})},city:function(){this.doAction("city",{})},province:function(t,n){this.doAction("province",{pid:t,pname:e(n)})},searchsubscribe:function(e){this.doAction("searchsubscribe",{type:e||""})},searchmodel:function(e){this.doAction("searchmodel",{type:e})},managesubscribe:function(){this.doAction("managesubscribe",{})
},topic:function(t){this.doAction("topic",{topicId:e(t)})},rank:function(e,t,n,a){"day"!=t&&"week"!=t&&"month"!=t&&(t="day"),"media"!=e&&"reporter"!=e&&(e="media"),"noword"==n&&(n=""),"nocategory"==a&&(a=""),this.doAction("rank",{scope:e,type:t,word:n||"",category:a||""},{params:{act_data_1:t,act_data_2:e}})},feedback:function(){this.doAction("feedback",{})},product:function(){this.doAction("product",{})},trenddetail:function(e){this.doAction("trenddetail",{pid:e})},trendlist:function(e,t){this.doAction("trendlist",{pid:e,bid:t})
},trendcomment:function(e,t,n){this.doAction("trendcomment",{title:e,pid:t,tid:n})},_httpRedirect:function(){var e=window.location.hash,t=e.match(/_http.*?\?(.*)/);if(t&&2==t.length){for(var n=t[1],a=n.split("&"),i="",o="",r="search",s=0;s<a.length;s++){var c=a[s].split("="),d="",l="";c[0]&&(d=c[0].toLowerCase()),c[1]&&(l=c[1].toLowerCase()),"word"==d?i=l:"tn"==d&&(o=l)}"bdwcna"==o&&(r="index"),Backbone.history.navigate(r+"/"+i,{trigger:!0,replace:!0})}},modelopen:function(e){this.doAction("modelopen",{type:e||"model"})
},defaultRoute:function(){Backbone.history.navigate("index",{trigger:!0,replace:!0})},doAction:function(e,t,n){setTimeout(function(){var t=n?n:{};if(!t.disable){var a;a=window.location.href.match(/baijia.baidu.com/)?_.extend({wa_type:e,act:"switch",act_data_5:"isBaijiaArtical"},t.params?t.params:{}):_.extend({wa_type:e,act:"switch"},t.params?t.params:{}),_ss(a)}},0),rocket.router.prototype.doAction.apply(this,arguments)}})}(Zepto),!function(e){rocket.subview.ui_config=rocket.subview.extend({className:"ui-config",tpl:'<div class="arrow"></div>\n<div class="list">\n    <div class="user"><div class="portrait"></div><span>点击登录</span></div>\n    <div class="messagecenter-link"><span>我的消息<div class="notice"></span></div></div>\n    <div class="favor-link"><span>我的收藏</span></div>\n    <div class="image-mode"><span>无图模式</span><div class="mark"></div></div>\n    <div class="slide-mode"><span>左右滑动</span><div class="mark"></div></div>\n</div>\n',events:{"click .user":"onuserclick","click .image-mode":"onimagemodeclick","click .slide-mode":"onslidemodeclick","click .list > div":"onpressed","click .favor-link":"onfavorclick","click .messagecenter-link":"onmessagecenterclick"},init:function(){var e=this;
e.render(),e.initUserInfo(),e.initImageMode(),e.initSlideMode()},render:function(){var e=this;e.$el.html(_.template(e.tpl,e.options))},registerEvents:function(){var e=this,t=e.ec;t.on("clean",e.onclean,e),e.userInfoModel&&e.userInfoModel.on("change",e.onuserinfochange,e)},initImageMode:function(){var t=this,n=webappandroid.MODE_NOIMAGE;if(webappandroid.conf.hasNoImageBtn()){var a,i=t.$(".image-mode .mark"),o=1===n.showImage?"off":"on";i.addClass(o),(a=n.noticetxt)&&!e.localStorage("NEWS_LAST_NOTI")&&(e.localStorage("NEWS_LAST_NOTI","1",n.lifetime),setTimeout(function(){t.tip(a)
},100))}},initUserInfo:function(){var t=this;webappandroid.login.isLoggedIn()&&(t.userInfoModel=new rocket.model.userinfo(null,e.extend({},t.options)),t.userInfoModel.fetch(),t.$(".user > span").html("读取中..."))},initSlideMode:function(){var e=this,t=e.$(".slide-mode .mark");"0"===webappandroid.helper.storageGet("news_page_slide")?(t.addClass("off"),webappandroid.enablePageSlide=!1):(t.addClass("on"),webappandroid.enablePageSlide=!0)},initMessageNotice:function(){function e(e,t,i){var o={};t&&!t.errno&&t.data&&n.messagemodel.parse&&(o=n.messagemodel.parse(t,i)||{}),o.count?a.hasClass("on")||(a.addClass("on"),n.messagemodel.setNoticeChanged(!0)):a.removeClass("on")
}function t(){a.removeClass("on")}var n=this,a=n.$(".messagecenter-link .notice");webappandroid.login.isLoggedIn()?(n.messagemodel=rocket.model.message.getInstance(),n.messagemodel.fetch({type:"unreadcount",success:e,error:t})):a.removeClass("on")},toggle:function(){var e=this;e.isShow?(e.hide(),e.isShow=!1):(e.initMessageNotice(),e.show(),e.isShow=!0)},openLogoutDialog:function(){var t=this,n=t.logoutDialog;n||(n=t.logoutDialog=e.ui.dialog({width:270,closeBtn:!1,title:"您是否要退出当前登录账号？",content:['<div class="buttonContent">','<button class="no">否</button>','<button class="ok">是</button>',"</div>"].join("")}),e(".ok",n.widget()).on("click",function(){t.logout()
}),e(".no",n.widget()).on("click",function(){n.hide()})),n.show()},onpressed:function(t){var n=e(t.currentTarget);n.addClass("pressed"),setTimeout(function(){n.removeClass("pressed")},300)},onuserinfochange:function(e){var t=this,n=e.get("uName");"wangmengqiao90"===n&&alert(window.userSpeed),t.$(".user > span").html(n&&/^[\x20-\x7f]+$/.test(n)?n:"已登录")},onclean:function(){var e=this;e.isShow=!1,e.hide()},returnURL:function(){var e="";return/(\?|\&)cardid=/i.test(window.location.href)&&(e=["cardid="+(webappandroid.helper.queryParam("cardid")||""),"cut_x="+(webappandroid.helper.queryParam("cut_x")||""),"cut_y="+(webappandroid.helper.queryParam("cut_y")||""),"cut_w="+(webappandroid.helper.queryParam("cut_w")||""),"cut_h="+(webappandroid.helper.queryParam("cut_h")||"")].join("&")),e="?"+e,/^([^?]+)/.test(location.href)?RegExp.$1+e+location.hash:"http://m.baidu.com/news"+e+location.hash
},logout:function(){var e=["http://wappass.baidu.com/passport/?logout","u="+encodeURIComponent(this.returnURL()),"tpl=xw","uid=","ssid=","bd_page_type=1","pu=","tn="].join("&");webappandroid.subdata.clearLocal(),location.href=e},login:function(e){var t=["http://wappass.baidu.com/passport/?login","u="+encodeURIComponent(e||this.returnURL()),"tpl=xw","smsLoginLink=1","sms=1","uid=","ssid=","bd_page_type=1","pu=","tn="].join("&");_ss({act:"newsuser",act_data_1:"loginclick",bduss:webappandroid.login.getBDUSS()||""}),setTimeout(function(){location.href=t
},600)},onuserclick:function(){var e=this;webappandroid.login.isLoggedIn()?e.openLogoutDialog():e.login(),_ss({act:e.ec.action+"_configuserbutton_click"})},onimagemodeclick:function(){var t,n=this,a=webappandroid.MODE_NOIMAGE,i=n.$(".image-mode .mark");1===a.showImage?(i.removeClass("on").addClass("off"),t=0):(i.removeClass("off").addClass("on"),t=1),e.localStorage("NEWS_NO_IMAGE",t,525600),e.localStorage("NEWS_LAST_NOTI",null),setTimeout(function(){window.location.reload()},300),_ss({act:n.ec.action+"_confignoimagebutton_click"})
},onslidemodeclick:function(){var e=this,t=e.$(".slide-mode .mark"),n="news_page_slide",a=webappandroid.helper.storageGet(n);null==a||"1"===a?(webappandroid.enablePageSlide=!1,webappandroid.helper.storageSet(n,0),t.removeClass("on").addClass("off")):(webappandroid.enablePageSlide=!0,webappandroid.helper.storageSet(n,1),t.removeClass("off").addClass("on")),_ss({act:e.ec.action+"_configslidemodebutton_click"})},onfavorclick:function(){var e=this,t="#favor/myfavor:"+encodeURIComponent("我的收藏");webappandroid.login.isLoggedIn()?this.navigate(t):(e.tip("请先登录"),window.setTimeout(function(){/^([^#]+)/.test(location.href)&&e.login(RegExp.$1+t)
},600)),this.hide()},onmessagecenterclick:function(){var e=this,t="#message/notice";webappandroid.login.isLoggedIn()?this.navigate(t):(e.tip("请先登录"),window.setTimeout(function(){/^([^#]+)/.test(location.href)&&e.login(RegExp.$1+t)},600)),this.hide()}})}(Zepto),!function(e){rocket.subview.ui_footer=rocket.subview.extend({className:"ui-footer",tpl:'<div class="item-wrapper">\n    <div class="item feedback">意见反馈</div>\n</div>\n<div class="item-wrapper">\n    <div class="item app-recommend">应用推荐</div>\n</div>\n<div class="item-wrapper">\n    <div class="item app-download">客户端</div>\n</div>\n',events:{"click .feedback":"onfeedbackclick","click .app-recommend":"onapprecommendclick","click .app-download":"onappdownloadclick"},init:function(){var e=this;
e.render(),e.show()},render:function(){var e=this;e.$el.html(e.tpl)},registerEvents:function(){var e=this,t=e.ec;t.on("pageafterchange",e.onpageafterchange,e)},onpageafterchange:function(e){var t=this,n=e.to;n===t.ec},onfeedbackclick:function(){var e=this,t=["http://ufosdk.baidu.com/?m=Client","u="+encodeURIComponent(encodeURIComponent(location.href)),"a=postView","appid=2110","product_type=10614","bw="+encodeURIComponent(webappandroid.helper.cookieGet("BAIDUID")),"bduss="+webappandroid.helper.cookieGet("BDUSS")].join("&");
_ss({act:e.ec.action+"_footer_feedbackbutton_click"}),setTimeout(function(){location.href=t},600)},onapprecommendclick:function(){var e=this,t="http://cp.mcp.baidu.com/wap/applist/applists.php?api_key=1006736b",n=webappandroid.subscribe.getSubscribeInfo(e.ec.type);if(webappandroid.helper.isIOS())window.open("http://wap.baidu.com/static/img/vsapp/webimageiphone.html");else switch(n.type){case"info":window.open(t);break;default:window.open(t)}_ss({act:e.ec.action+"_footer_apprecommendbutton_click",act_data_1:n.name})
},onappdownloadclick:function(){var t=this,n="http://bj.bs.baidu.com/newsapp/baidunews_4064a.apk";e.os.ios?setTimeout(function(){location.href="http://itunes.apple.com/cn/app/id482820737?mt=8"},300):webappandroid.helper.isWeiXin()?setTimeout(function(){location.href=webappandroid.conf.getWXAppStoreURL()},300):webappandroid.helper.checkNewsClient(function(){webappandroid.helper.openNewsClient(n)},function(){location.href=n}),_ss({act:t.ec.action+"_footer_appdownloadbutton_click"})}})}(Zepto),!function(){rocket.subview.ui_gps=rocket.subview.extend({className:"ui-gps",init:function(){var e=this;
e.resetGPSStatus()},triggerCallGPSReady:function(e,t,n){var a=this;a.ec,window.setTimeout(function(){null==e?a.ec.trigger("gpscityinfofailed",n):(a.updateGpsCityInfo(e),a.gpsCommand="NO_NEED")},100)},requestNativeGPS:function(){var e=this,t=(e.ec,function(t){e.triggerCallGPSReady(null,null,t),_ss({act:"city_gpsstatus",act_data_1:"0"})});webappandroid.local.canGPS()?webappandroid.local.callGPS(function(n,a){null!==n?(_ss({act:"city_gpsstatus",act_data_1:"1"}),e.callLBSData(n)):t(a)}):t(-1)},sendLocalInfo:function(e,t){var n=this,a=(n.ec,{});
a.localid=e.localid,a.displayname=e.displayname,a.ts=t.ts,n.triggerCallGPSReady(a,t)},callLocalInfo:function(e,t){var n,a=this,i=(a.ec,{}),o=function(){a.triggerCallGPSReady(null,t)};e.province&&(i.province=e.province),e.city&&(i.city=e.city),e.district&&(i.county=e.district),n=new rocket.model.localid(i,a.options),n.fetch({success:function(e){var n=e.toJSON();n&&n.displayname?a.sendLocalInfo(n,t):o()},error:o})},callLBSData:function(e){var t,n=this;n.ec,t=new rocket.model.geo;var a=function(){n.triggerCallGPSReady(null,e)
};t.fetch({location:e.lat+","+e.lng,success:function(i,o,r){var s=t.parse(o,r);s&&s.city?n.callLocalInfo(s,e):a()},error:a})},registerEvents:function(){var e=this,t=e.ec;t.on("pageafterchange",e.onpageafterchange,e),t.on("fetchgpsinfo",e.fetchGPS,e)},unregisterEvents:function(){var e=this,t=e.ec;e.subec,t.off("pageafterchange",e.onpageafterchange,e),t.off("fetchgpsinfo",e.fetchGPS,e)},resetGPSStatus:function(){var e,t=this;e=t.locInfo=webappandroid.helper.getLocInfoFromCookie(),e&&e.ts==webappandroid.local.getGpsCityInfoVersion()?t.gpsCommand="NO_NEED":e?("undefined"!=typeof t.gpsModel||(t.gpsModel=new rocket.model.gps({mcx:e.mcx,mcy:e.mcy},null)),t.gpsCommand="HAS_COOKIE_NEED"):t.gpsCommand=webappandroid.local.canGPS()?"HAS_GPS_NEED":"FAILED"
},fetchGPS:function(){var e=this;switch(e.gpsCommand){case"NO_NEED":e.updateCityInfoFromStorage();break;case"HAS_COOKIE_NEED":e.gpsCommand="FETCHING",e.requestGPS();break;case"HAS_GPS_NEED":e.gpsCommand="FETCHING",e.requestNativeGPS();break;case"FAILED":webappandroid.local.setGpsFailed(),e.ec.trigger("gpscityinfofailed")}},onpageafterchange:function(e){var t=this,n=e.to;e.params,n==t.ec},requestGPS:function(){var e=this,t={};e.gpsModel&&e.gpsModel.fetch({success:function(n){var a=n.toJSON().addressComponent;
e.localidModel=new rocket.model.localid({province:a.province,city:a.city},e.options),e.localidModel.fetch({success:function(n){var a=n.toJSON();a.displayname?(t.localid=a.localid,t.displayname=a.displayname,e.updateGpsCityInfo(t)):(webappandroid.local.setGpsFailed(),e.ec.trigger("gpscityinfofailed"))}})}})},checkIfGpsDataChanged:function(e){var t;return webappandroid.local.getGpsFailed()||(t=webappandroid.local.getGpsCityInfo()),null==e||null!=t&&t.displayname==e.displayname?!1:!0},updateGpsCityInfo:function(e){var t=this,n=t.ec;
e&&e.displayname&&t.checkIfGpsDataChanged(e)&&(webappandroid.local.saveGpsCityInfo(e.localid,e.displayname,e.ts),n.trigger("gpscityinfochange",{data:e}))},updateCityInfoFromStorage:function(){var e,t=this;webappandroid.local.getGpsFailed()&&(webappandroid.local.syncGpsCityInfo(),e=webappandroid.local.getGpsCityInfo(),t.ec.trigger("gpscityinfochange",{data:e}))}})}(Zepto),!function(e){rocket.subview.ui_lottery=rocket.subview.extend({className:"ui-lottery",tpl:'<div>\n	<h5>\n        <div class="go-history m10">投注记录</div>\n        <div class="page-lottery-logo m10"></div>\n        <div class="title nowrap"><%=list.lottery_name%></div>\n        <div class="abs nowrap">投注截止：<%= list.time_endsale %></div>\n	</h5>\n	<div class="lottery-detail">\n		<span class="go-btn" data-url="<%=url%>">去投注</span>\n		<div class="lottery-detail-numbers">\n			<% _.each(list.randomNumber[0], function(item, i){%>\n			<span class="number">\n				<i><%=item%></i>\n			</span>\n			<%})%>\n			<span class="number blue">\n				<i><%=list.randomNumber[1][0]%></i>\n			</span>\n		</div>\n	</div>\n</div>',page_tpl:'<h2 class="page-section-title">\n	<span class="go-history">投注记录</span>\n	<span>彩票专区</span>\n</h2>\n<div>\n	<h5>\n		<span class="page-lottery-logo"></span>\n		<div><%=list.lottery_name%></div>\n		<div class="abs">投注截止：\n			<%= list.time_endsale %></div>\n	</h5>\n	<div class="lottery-detail">\n		<span class="go-btn" data-url="<%=url%>">去投注</span>\n		<div class="lottery-detail-numbers">\n			<% _.each(list.randomNumber[0], function(item, i){%>\n			<span class="number">\n				<i><%=item%></i>\n			</span>\n			<%})%>\n			<span class="number blue">\n				<i><%=list.randomNumber[1][0]%></i>\n			</span>\n			\n		</div>\n	</div>\n	<ul class="lottery-other">\n		<li>\n			<a href="javascript:void(0)" data-type="letou">大乐透</a>\n		</li>\n		<li>\n			<a href="javascript:void(0)" data-type="soccer">竞彩足球</a>\n		</li>\n		<li>\n			<a href="javascript:void(0)" data-type="fucai">福彩3D</a>\n		</li>\n	</ul>\n</div>',page_tpl_soccer:'<h2 class="page-section-title">\n	<span class="go-history">投注记录</span>\n	<span>彩票专区</span>\n</h2>\n<div class="page-lottery-soccer">\n	<h5><%=list.match%> \n		<span class="abs">比赛时间：<%=list.match_time%></span>\n	</h5>\n	<div class="lottery-detail">\n		<div class="lottery-detail-soccer">\n			<span class="soccer-team-1" data-code="3">\n				<%=list.hteam%>\n				<br/>\n				<i>胜</i>\n			</span>\n			\n			<span class="soccer-team-2" data-code="0">\n				<%=list.vteam%>\n				<br/>\n				<i>胜</i>\n			</span>\n			\n			<span class="soccer-draw" data-code="1">\n				VS\n				<br/>\n				<i>平</i>\n			</span>\n		</div>\n		<div class="go-btn-soccer">去投注</div>\n	</div>\n</div>',events:{"click .lottery-detail-soccer span":"onlotteryselected","click .lottery-other li a":"onlotteryother","click .go-btn-soccer":"ongobtnsoccer","click .go-btn":"ongobtn","click .go-history":"ongohistory"},init:function(t){var n=this;
n.isFirstRender=!0,n.model=new rocket.model.lottery({},e.extend({},t)),n.type=t.type,window.addEventListener("scroll",e.proxy(n.scrollLottery,n),!1)},registerEvents:function(){var e=this,t=e.ec;t.on("pagebeforechange",e.onpagebeforechange,e),t.on("page:pageloaded",e.onpageloaded,e),e.model.on("change",e.render,e)},unregisterEvents:function(){var t=this,n=t.ec;n.off("pagebeforechange",t.onpagebeforechange,t),n.off("page:pageloaded",t.onpageloaded,t),t.model.off("change",t.render,t),window.removeEventListener("scroll",e.proxy(t.scrollLottery,t),!1)
},getLotteryType:function(e){var t=this;if("index"==t.ec.action&&/生活|娱乐|体育|社会|军事|女人|搞笑|生活|国际|国内|汽车|财经|房产|时尚|游戏|旅游|人文|创意/.test(e))return"bothColor";if("page"==t.ec.action){if(/生活|娱乐/.test(e))return"bothColor";if(/体育/.test(e))return"soccer"}},scrollLottery:function(){var e=this,t=e.ec.action;!e.isLotteryShow&&e.$el.offset().top-window.scrollY<window.innerHeight&&(e.isLotteryShow=!0,setTimeout(function(){_ss({act:"lottery_show",act_data_1:t+"_"+e.getLotteryType(e.type)})},100))},render:function(){var e=this,t=e.ec,n=t.action,a=e.tpl,i=e.model.getBothColorUrl(n),o=e.model.data_cache.bothColor,r=e.getLotteryType(e.type);
"page"==n&&("soccer"==r&&(a=e.page_tpl_soccer,i="",o=e.model.data_cache.soccer),"bothColor"==r&&(a=e.page_tpl)),e.$el.html(_.template(a,{url:i,list:o})),e.onpageloaded()},onpageloaded:function(){var e=this,t=e.getLotteryType(e.type);"soccer"==t||"bothColor"==t?e.show():e.hide()},onlotteryselected:function(t){$ele=e(t.currentTarget),$ele.addClass("soccer-selected").siblings().removeClass("soccer-selected")},ongobtnsoccer:function(t){var n=this,a=(e(t.currentTarget),n.ec.action),i=n.$(".soccer-selected"),o=n.model.getSoccerUrl(n.ec.action,i.data("code"));
i.length?(setTimeout(function(){window.open(o)},100),_ss({act:"ongobtnsoccer",act_data_1:a+"_"+n.getLotteryType(n.type)})):n.tip("请选择")},ongobtn:function(t){var n=this,a=e(t.currentTarget),i=n.ec.action,o=(n.model.getAgentId(i),a.data("url"));setTimeout(function(){window.open(o)},100),_ss({act:"ongobtn",act_data_1:i+"_"+n.getLotteryType(n.type)})},ongohistory:function(){var e=this,t=e.ec.action,n=e.model.getAgentId(t),a="http://touch.lecai.com/?agentId="+n+"#path=page%2Forder%2Findex";setTimeout(function(){window.open(a)
},100),_ss({act:"ongohistory",act_data_1:t+"_"+e.getLotteryType(e.type)})},onlotteryother:function(t){var n=this,a=e(t.currentTarget),i=a.data("type"),o=n.model.getAgentId(n.ec.action),r="http://touch.lecai.com/?agentId="+o+"#path=page%2Flottery%2Fdlt/?lotype=DLT",s="http://touch.lecai.com/?agentId="+o+"#path=page%2Flottery%2Fjczq",c="http://touch.lecai.com/?agentId="+o+"#path=page%2Flottery%2Ffc3d/?lotype=FC3D",d="letou"==i?r:"soccer"==i?s:c;setTimeout(function(){window.open(d)},100),_ss({act:"onlotteryother",act_data_1:i}),t.preventDefault(),t.stopPropagation()
},onpagebeforechange:function(e){var t,n=this,a=e.to,i=e.params;a==n.ec&&(t=n.getLotteryType(i.type),n.type=i.type,"soccer"==t||"bothColor"==t?(n.isLotteryShow=!1,n.model.fetch()):n.hide())}})}(Zepto),!function(e){rocket.subview.ui_searchbox=rocket.subview.extend({className:"ui-searchbox",tpl:'<form action="" class="search-form" method="get">\n    <div class="search">\n    	<!-- <div class="search-icon"></div> -->\n        <div class="search-input">\n            <input type="text" maxlength="32">\n        </div>\n        <div class="search-button">\n            <input type="submit" value="百度一下">\n        </div>\n    </div>\n</form>\n\n',init:function(){var e=this;
e.render(),e.$form=e.$(".search-form"),e.$searchInput=e.$(".search-input input"),setTimeout(function(){e.initSuggestion()},500)},registerEvents:function(){var e=this,t=e.ec;t.on("pagebeforechange",e.onpagebeforechange,e)},render:function(){var e=this;e.$el.html(e.tpl),e.show()},onpagebeforechange:function(e){var t=this,n=e.to,a=e.params,i=a.word||"";n==t.ec&&(t.show(),i&&setTimeout(function(){t.$searchInput.val(i)},500))},initSuggestion:function(){var t=this,n=(t.$(".search-input").width()+t.$(".search-button").width(),t.$(".search-icon")),a=t.sugDialog=e.ui.dialog({width:270,closeBtn:!1,title:"清除全部历史记录？",content:['<div class="buttonContent">','<button class="no">取消</button>','<button class="ok">确定</button>',"</div>"].join("")}),i=function(){t.suggest.history(null),t.suggest.hide(),a.hide()
},o=function(){t.$searchInput.focus(),setTimeout(function(){window.scrollTo(0,45)},0)},r=function(){};t.suggest=e.ui.suggestion({container:t.$searchInput,source:"http://nssug.baidu.com/su?prod=news&ie=utf-8",height:73,offset:{x:0,y:2},onsubmit:function(){t.navigate("search/"+encodeURIComponent(t.$searchInput.val()))},onselect:function(t){e(t).addClass("selected")}}),t.quickdelete=e.ui.quickdelete({container:t.$searchInput,size:20,offset:{x:90,y:7}}),e(".no",a.widget()).on("click",function(){a.hide()
}),e(".ok",a.widget()).on("click",function(){i()}),t.suggest.on("open",o).on("close",r).clearHistory=function(){a.show(),t.suggest.leaveInput()},t.$searchInput.on("focus",function(){n.hide()}),t.$searchInput.on("blur",function(){r(),t.suggest.hide(),t.$searchInput||n.show()}),t.$searchInput.on("focus",function(){t.ec.trigger("clear",{target:t.el})}),t.$form.on("submit",function(e){var n,a=t.$searchInput.val();return(a=a.replace(/^\s+|\s+$/g,""))?(n="search/"+encodeURIComponent(a),setTimeout(function(){t.navigate(n)
},0),t.suggest.hide(),r(),!1):(t.tip("请输入搜索词"),t.$searchInput.focus(),void e.preventDefault())})}})}(Zepto),!function(e){rocket.subview.ui_simple_searchbox=rocket.subview.extend({className:"simple-searchbox",tpl:'<form>\n    <!--android机型placeholder文本不居中，只能用实际文本模拟-->\n    <input type="text" maxlength="20" value="<%- placeholder %>" />\n    <span></span>\n</form>\n\n\n',events:{"touchstart form > span":"onquickdeleteclick"},init:function(){var e=this;e.render(),e.$form=e.$("form"),e.$input=e.$("input"),e.$quickdelete=e.$("form > span"),e.throttleTimer=null,e.$quickdelete.hide(),e.show(),e.$input.css("color","#bbb"),e.autofocus()
},render:function(){var e=this;e.$el.html(_.template(e.tpl,e.options))},registerEvents:function(){var e=this,t=e.ec;e.$input.on("click",function(t){e.onfocus(t)}).on("blur",function(t){e.onblur(t)}).on("input",function(t){e.oninput(t)}),e.$form.on("submit",function(e){e.preventDefault()}),t.on("pageafterchange",e.onpageafterchange,e),t.on("clearSearchWord",function(){e.$input.val("").trigger("blur")})},onpageafterchange:function(e){var t=this,n=e.to;n==t.ec&&t.autofocus()},autofocus:function(){},autogotop:function(){var e=this;
e.options.autogotop&&setTimeout(function(){window.scrollTo(0,e.options.autogotop)},0)},onfocus:function(){var e=this,t=e.$input;t.val()==e.options.placeholder&&t.val(""),t.css({color:"#000"}),e.autogotop()},onblur:function(){var t=this,n=t.$input;""==e.trim(n.val())&&(n.val(t.options.placeholder),n.css({color:"#bbb"}))},oninput:function(){var t=this,n=t.$input,a=t.$quickdelete;""==e.trim(n.val())?a.hide():a.show(),t.triggerInputChange()},onquickdeleteclick:function(){var e=this,t=e.$input,n=e.$quickdelete;
t.val(""),n.hide(),t.focus(),e.triggerInputChange()},getInputValue:function(){var t=this;return e.trim(t.$input.val())==t.options.placeholder?"":t.$input.val()},triggerInputChange:function(){var e=this;clearTimeout(e.throttleTimer),e.throttleTimer=setTimeout(function(){e.ec.trigger("inputchange",{content:e.getInputValue().replace(/\s+/g,"")})},200)}})}(Zepto),!function(e){rocket.subview.ui_topbannerad=rocket.subview.extend({tpl:'<div style="background-image:url(<%=data.bgimageurl%>);display: block;width: 100%;font-size: 0;-webkit-background-size: 10px 51px;background-repeat: repeat;">\n    <div\n        data-act="ad_top"\n        data-app="<%=data.url%>" \n        data-url="<%=data.url%>"\n        style="background-image:url(<%=data.imageurl%>);position:relative;background-repeat: no-repeat;-webkit-background-size:320px 51px; width:320px;height:51px;margin:0 auto;"/>\n        <span\n            data-act="ad_top_closebtn"\n            data-key="<%-data.id%>" \n            data-value="<%=data.version%>"\n            style="display:block;background:url(http://m.baidu.com/static/news/webapp_lite/img/round_close.png) 2px 3px no-repeat;background-size: 16px 16px;width:40px;height:40px;position:absolute;left:0px;top:0px;z-index:100;"></span>\n</div>\n</div>\n\n',events:{"touchstart span":"onclosebtnclick"},init:function(){var e=this;
webappandroid.helper.checkNewsClient(function(){_ss({act:"news_installed"})},function(){e.render()})},registerEvents:function(){var e=this;e.ec.on("pagebeforechange",e.onpagebeforechange,e)},render:function(){var e=this,t=e.options.topADConfig,n=t.version,a=webappandroid.helper.storageGet(t.id);n!=a&&(e.$el.html(_.template(e.tpl,{data:t})),e.show(),_ss({act:"show_ad_top"}),webappandroid.helper.setupInvokeApp(e.$('div[data-act="ad_top"]'),null,null,e.options.src||null))},onpagebeforechange:function(e){var t=this,n=e.to,a=e.params,i=a.src||null;
t.getFeatureString(a),n==t.ec&&i&&/^http:\/\//.test(i)&&!/weibo\.com/.test(i)&&webappandroid.helper.setupInvokeApp(t.$('div[data-act="ad_top"]'),null,null,i)},onclosebtnclick:function(t){var n=this,a=e(t.target),i=a.data("act"),o=a.data("key"),r=a.data("value");n.hide(),i&&_ss({act:i}),webappandroid.helper.storageSet(o,r),t.stopPropagation(),t.preventDefault()}})}(Zepto),!function(e){rocket.subview.ui_topbannerfeedad=rocket.subview.extend({tpl:'<div\n    data-act="ad_top"\n    data-app="<%=data.url%>" \n    data-url="<%=data.url%>"\n    style="background-image:url(<%=data.imageurls[0].url%>);position:relative;background-repeat: no-repeat;-webkit-background-size:100% 51px; width:100%;height:51px;margin:0 auto;"/>\n    <span\n        data-act="ad_top_closebtn"\n        data-key="<%-data.show_url%>" \n        data-value="<%=data.title%>"\n        style="display:block;background:url(http://m.baidu.com/static/news/webapp_lite/img/round_close.png) 2px 3px no-repeat;background-size: 16px 16px;width:40px;height:40px;position:absolute;left:0px;top:0px;z-index:100;"></span>\n</div>',events:{"touchstart span":"onclosebtnclick","touchstart div":"onfeedadclick"},init:function(){var e=this;
e.render()},registerEvents:function(){var e=this;e.ec.on("pagebeforechange",e.onpagebeforechange,e)},render:function(){var e=this,t=e.options.topFeedADConfig,n=t.title,a=webappandroid.helper.storageGet(t.show_url);n!==a&&(e.$el.html(_.template(e.tpl,{data:t})),e.show())},onpagebeforechange:function(e){var t=this,n=e.to;e.params,n===t.ec},onclosebtnclick:function(t){var n=this,a=e(t.target),i=a.data("act"),o=a.data("key"),r=a.data("value");n.hide(),i&&_ss({act:i}),webappandroid.helper.storageSet(o,r),t.stopPropagation(),t.preventDefault()
},onfeedadclick:function(t){var n=this,a=e(t.target);"SPAN"!==a[0].nodeName&&_sf({params:{act:"click_feed_ads",urls:n.options.topFeedADConfig.display_url,"class":"zhengwenye",pos:0},success:function(){document.location.href=n.options.topFeedADConfig.display_url}})}})}(Zepto),!function(e){rocket.subview.ui_topicSlider=rocket.subview.extend({className:"topic-gallery-container",tpl:'<div class="topic-gallery">\n    <div class="g-list">\n        <% _.each(list, function(item, index){ %>\n        <div class="g-item">\n            <div class="g-item-innerbox">\n                <div class="g-imagebox">\n                    <img class="lazy-load" data-url="<%= (item.imageurl || item.imageurls[0].url) %>"/>\n                   \n                    <!-- <div class="g-mask">\n                        <div class="g-mask-video"><%=index%></div>	\n                    </div> -->\n                </div>\n                <h4 class="g-title"><%=item.title%></h4>\n            </div>\n             \n         </div>\n        <%})%>\n    </div>\n    <div class="g-icons"></div>\n</div>\n',init:function(){var e=this;
e.render(),e.show(),e.showLoading(e.$el)},onorientationchange:function(){e(".topic-gallery").topicSlider("reset")},onsubpagebeforechange:function(e){var t=this,n=(e.from,e.to),a=e.params;t.getFeatureString(a),n==t.ec&&t.$el.show()},render:function(){var e=this;e.$el.append(_.template(e.tpl,e.options)),e.$(".topic-gallery").topicSlider({preCount:e.options.preCount||1,isLoop:e.options.isLoop||!1,preWidth:e.options.preWidth||0,theme:e.options.theme||"",onItemClick:function(){}}),e.hideLoading()}})}(Zepto),!function(){rocket.subview.ui_topTip=rocket.subview.extend({className:"ui-topTip",tpl:"<p><%- infoContent %></p>\n",events:{"click .btn-close":"onCloseClick"},init:function(){var e=this;
e.render()},topTipShow:function(){var e=this;e.show(1e3)},topTipHide:function(){var e=this;e.hide(1e3)},registerEvents:function(){var e=this;ec=e.ec,ec.on("topTipShow",e.topTipShow,e),ec.on("topTipHide",e.topTipHide,e)},onCloseClick:function(){var e=this;e.ec.trigger("rankInfoCloseClick"),e.topTipHide()},render:function(){var e=this,t="关于媒体网络影响力",n="媒体网络影响力，指通过该媒体被转载文章数量来反映其影响力水平，被转载量越高影响力越大。";e.$el.html(_.template(e.tpl,{infoTitle:t,infoContent:n})),e.$el.append("<span class='btn-close'></span>")
}})}(Zepto),!function(){window.SOP={init:function(e,t,n){this.ps=e,this.url=n,this.hasP=!1,this.p="",this.idx=0,this._pref="http://127.0.0.1:6259/getpackageinfo?callback=SOP.cbCheck&mcmdf=inapp_baidubrowser&packagename=",this.intent=t,this._check()},click:function(){var e=this;e.hasP?e._open():e._download(),_ss({act:"baidubrowser",act_data_1:e.hasP?"open":"download"})},cbCheck:function(e){var t=this;0==e.error&&e.package_infos&&e.package_infos.length?t.hasP=!0:t._check()},cbOpen:function(){},_check:function(){var e=this;
if(e.ps.length<=e.idx)return!1;var t=e.ps[e.idx++];e.p=t;var n=document.createElement("script");n&&(n.src=e._pref+t),document.body.appendChild(n)},_open:function(){var e=this,t=encodeURIComponent("#Intent;action=android.intent.action.MAIN;launchFlags=0x10000000;component="+e.p+"/"+e.intent+";end"),n=document.createElement("script");document.body.appendChild(n),n.src="http://127.0.0.1:6259/sendintent?callback=SOP.cbOpen&intent="+t+"&mcmdf=inapp_baidubrowser&t="+ +new Date},_download:function(){var e=this;
location.href=e.url}}}(Zepto),!function(){rocket.subview.ui_trend=rocket.subview.extend({events:{"click .ui-trend":"onchartclick"},className:"ui-trend",tpl:'<div class="ui-trend-top">\n    <div class="ui-trend-more">\n        更多 <b>></b>\n    </div>\n    <div class="ui-trend-logo">\n    </div>\n    <div class="ui-trend-title">\n        <%- data.name %>舆情监测\n    </div>\n</div>\n<div class="ui-trend-chart" data-pid="<%- data.pid %>" data-bid="<%- data.bid %>" >\n    <canvas class="ui-trend-chartcanvas"></canvas>\n    <img class="ui-trend-chartimg"/>\n</div>\n',ns:{clickRecord:function(e){_ss({act:"trend_click",act_data_1:e})
},showRecord:function(e){_ss({act:"trend_show",act_data_1:e})}},getPercent:function(e){return Math.round(100*(e-.001)).toFixed(0)},getTotal:function(e){return e?(e.bad_count||0)+(e.good_count||0)+(e.middle_count||0):0},calcPercent:function(e){try{if(e&&e.hasOwnProperty("bad_count")){var t=this.getTotal(e);return{good:e.good_count/t,middle:e.middle_count/t,bad:e.bad_count/t,name:e.name,bid:e.bid,pid:e.pid,tag_type:e.tag_type}}}catch(n){}return null},init:function(e){var t=this;e.data&&t.getTotal(e.data)&&(t.data=t.calcPercent(e.data),t.data&&t.render())
},render:function(){var e=this;e.$el.append(_.template(e.tpl,{data:e.data})),window.setTimeout(function(){null!=e.$el&&e.renderChart()},100),e.show()},ratioChange:function(e,t,n){var a=window.devicePixelRatio||1;e.canvas.style.width=t+"px",e.canvas.style.height=n+"px",e.canvas.height=n*a,e.canvas.width=t*a,1!=a&&e.scale(a,a)},renderCircleStat:function(e,t){function n(t){e.save().beginPath().arc(t.x,t.y,t.radius,t.sAngle,t.sAngle+(t.eAngle-t.sAngle),!0).strokeStyle(t.color).lineWidth(t.lineWidth).stroke().restore()
}function a(t){var n,a,o,r,s="normal normal normal 22px/22px Arial",c="normal normal normal 9px/22px Arial";o=t.text1-0,r=Math.ceil(0+o),n=e.save().font(s).getTextWidth(r),a=e.save().font(c).getTextWidth(t.text2),e.save().textAlign("start").font(s).fillStyle(i.color).fillText(r,t.x-(n+a)/2,t.y).textAlign("end").font(c).fillStyle(i.color).fillText(t.text2,t.x+(n+a)/2+2,t.y-3).textAlign("center").fillText(t.text3,t.x,t.y+15).restore()}var i=t,o=Math.PI,r={x:i.x,y:i.y,radius:i.radius,color:i.color,sAngle:i.sAngle,eAngle:i.eAngle,lineWidth:3},s={x:i.x,y:i.y,radius:i.radius,color:i.color,sAngle:1.5*o,eAngle:-.5*o,lineWidth:1},c={text1:i.text1,text2:i.text2,text3:i.text3,x:i.x,y:i.y};
n(r),a(c),n(s)},renderChart:function(){var e=this,t=e.$(".ui-trend-chartcanvas"),n=new Canvas(t[0]),a=e.$(".ui-trend-chartimg"),i=e.$(".ui-trend-chart").width(),o=e.$(".ui-trend-chart").height(),r=Math.PI,s=30,c=40,d=(i-2*c-6*s)/2;e.ratioChange(n,i,o),e.renderCircleStat(n,{x:s+d,y:o/2,radius:s,color:"#e02f2f",sAngle:1.5*r,eAngle:(1.5-2*(1-e.data.middle-e.data.bad))*r,text1:100-e.getPercent(e.data.middle)-e.getPercent(e.data.bad),text2:"%",text3:"好评"}),e.renderCircleStat(n,{x:3*s+c+d,y:o/2,radius:s,color:"#ea9318",sAngle:1.5*r,eAngle:(1.5-2*e.data.middle)*r,text1:e.getPercent(e.data.middle),text2:"%",text3:"中评"}),e.renderCircleStat(n,{x:5*s+2*c+d,y:o/2,radius:s,color:"#1a8afd",sAngle:1.5*r,eAngle:(1.5-2*e.data.bad)*r,text1:e.getPercent(e.data.bad),text2:"%",text3:"差评"});
var l=n.canvas.toDataURL();l&&l.length>20?(a.width(i).height(o).attr("src",l),a.show()):t.show(),e.ns.showRecord(e.data&&e.data.name)},onchartclick:function(){var e=this;e.navigate(["#trenddetail",e.data.pid].join("/")),e.ns.clickRecord(e.data&&e.data.name)}})}(Zepto),!function(e){function t(){return"http://a.app.qq.com/o/simple.jsp?pkgname=com.baidu.news&g_f=991653"}function n(e){return e>500&&1e3>e}function a(e){return/^local/.test(e)}function i(e){return/^local:(\d+)/.test(e)?RegExp.$1:N.local.getCityInfo().localid
}function o(e){return/^local:\d+:(.+)$/.test(e)?RegExp.$1:N.local.getCityInfo().displayname}function r(){return E}function s(t){for(var n,i,o=0,r=E.length;r>o;o++)if(n=E[o],n.id==t)return n;return a(t)?(n=e.extend({},E[1]),i=N.local.getCityInfo(),n.id="localnews:"+i.localid+":"+encodeURIComponent(i.displayname),n):{}}function c(e){return s(e).title||null}function d(e){for(var t,n=0,i=E.length;i>n;n++)if(t=E[n],t.id==e)return n;return a(e)?1:0}function l(){return P}function u(e,t){return t.indexOf(e)>=0?!0:!1
}function p(){var e=N.helper.queryParam("fr");return!u(e,D)}function h(){var t,n,a=window.userSpeed,i="NEWS_NO_IMAGE",o={0:{showImage:0,noticetxt:"无图模式",lifetime:43200},1:{showImage:1,noticetxt:"有图模式",lifetime:43200},"2g":{showImage:0,noticetxt:"您的网速较慢，已经为您切换到省流量模式",lifetime:1440},"3g":{showImage:1,noticetxt:"您可以切换为无图模式，更省流量",lifetime:1440},wifi:{showImage:1,noticetxt:"",lifetime:1440}};n=o[1],t=parseInt(e.localStorage(i)),isNaN(t)?a&&!isNaN(+a)&&(t=300>a?"wifi":500>a?"3g":"2g",n=o[t]):(t=-1==t?1:2==t?0:t,n=o[t]),N.MODE_NOIMAGE=n
}function g(){return L}function f(e){var t=B;for(var n in t)if(t[n].test(e))return O+n+".png";return O+"weather_default.png"}function m(){return $}function w(){var t=N.helper.storageGet(q);return t&&(I=JSON.parse(N.helper.storageGet(q))),I?I.time+U<(new Date).getTime()&&(I=e.extend({time:(new Date).getTime()},{})):I=e.extend({time:(new Date).getTime()},I),I}function v(e){return w(),I[e]}function b(){N.helper.storageSet(q,JSON.stringify(I))}function y(e,t){w(),I[e]=t,b()}function x(e){w(),delete I[e],b()
}function _(){var t=N.helper.storageGet(G);return t&&(A=JSON.parse(N.helper.storageGet(G))),A?A.time+z<(new Date).getTime()&&(A=e.extend({time:(new Date).getTime()},{})):A=e.extend({time:(new Date).getTime()},A),A}function k(){N.helper.storageSet(G,JSON.stringify(A))}function S(e){_(),A[e]=!0,k()}function T(e){return"http://m.baidu.com/s?word="+encodeURIComponent(e)+"&ref=www_colorful&st=111041&tn=iphone&from=381a_zy_t"}function C(e){return"http://m.baidu.com/s?word="+encodeURIComponent(e)}var I,A,N=window.webappandroid=window.webappandroid||{},R=N.conf=N.conf||{},E=[{id:"focus",title:"焦点",index:0},{id:"localnews:0:%E5%8C%97%E4%BA%AC",title:"本地",index:0},{id:"enternews",title:"娱乐",index:4},{id:"socianews",title:"社会",index:5},{id:"mil",title:"军事",index:14},{id:"healthnews",title:"女人",index:21},{id:"fun",title:"搞笑",index:19,newFlag:!0},{id:"internet",title:"互联网",index:7},{id:"technnews",title:"科技",index:8},{id:"life",title:"生活",index:16,newFlag:!0},{id:"internews",title:"国际",index:1},{id:"civilnews",title:"国内",index:2},{id:"sportnews",title:"体育",index:3},{id:"autonews",title:"汽车",index:10},{id:"finannews",title:"财经",index:6},{id:"housenews",title:"房产",index:9},{id:"fashion",title:"时尚",index:12,newFlag:!0},{id:"edunews",title:"教育",index:11},{id:"gamenews",title:"游戏",index:13,newFlag:!0},{id:"lvyou",title:"旅游",index:15,newFlag:!0},{id:"renwen",title:"人文",index:17,newFlag:!0},{id:"creative",title:"创意",index:18,newFlag:!0}],P={weibo:{title:"新浪微博",urlTemplate:["http://service.weibo.com/share/share.php?url=<%=url%>","appkey=","title=<%=title%>","pic=&language=zh_cn"].join("&"),id:1},renren:{title:"人人网",urlTemplate:["http://widget.renren.com/dialog/share?resourceUrl=<%=url%>","srcUrl=<%=url%>","title=<%=title%>","description="].join("&"),id:9},qzone:{title:"QQ空间",urlTemplate:["http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=<%=url%>","title=<%=title%>","desc=&summary=&site="].join("&"),id:7},qweibo:{title:"腾讯微博",urlTemplate:["http://share.v.t.qq.com/index.php?c=share","a=index","url=<%=url%>","title=<%=title%>"].join("&"),id:2},douban:{title:"豆瓣网",urlTemplate:["http://shuo.douban.com/!service/share?href=<%=url%>","name=<%=title%>"].join("&"),id:10}},D=["newsclient"],L=[{id:"wangye",text:"网页",key:"word",url:"http://m.baidu.com/s?bd_page_type=1&ssid=0&from=0&uid=&fr=news"},{id:"tupian",text:"图片",key:"word",url:"http://m.baidu.com/img?tn=bdlistiphone&itj=41&bd_page_type=1&ssid=0&from=0&fr=news"},{id:"shipin",text:"视频",key:"word",url:"http://m.baidu.com/video?bd_page_type=1&ssid=0&uid=&from=0&fr=news"},{id:"tieba",text:"贴吧",key:"kw",url:"http://wapp.baidu.com/s?bd_page_type=1&ssid=&uid=&from=0&fr=news"},{id:"zhidao",text:"知道",key:"word",url:"http://wapiknow.baidu.com/index?st=3&bd_page_type=1&ssid=&uid=&from=0&fr=news"},{id:"wenku",text:"文库",key:"word",url:"http://wk.baidu.com/search?st=3&bd_page_type=1&ssid=&uid=&from=0&fr=news"},{id:"baike",text:"百科",key:"word",url:"http://wapbaike.baidu.com/search?st=3&bd_page_type=1&ssid=&uid=&from=0&fr=news"},{id:"kongjian",text:"空间",key:"",url:"http://i.hi.baidu.com/?bd_page_type=1&ssid=0&from=0&uid=&fr=news"},{id:"yinyue",text:"音乐",key:"key",url:"http://music.baidu.com/s?itn=baidump3mobile&ct=671088640&rn=20&gate=33&ie=utf-8&bd_page_type=1&ssid=&uid=&from=0&fr=news"},{id:"ditu",text:"地图",key:"word",url:"http://map.baidu.com/m?itj=45&ssid=0&from=0&bd_page_type=1&uid="},{id:"yingyong",text:"应用",key:"word",url:"http://m.baidu.com/ssid=0/from=0/bd_page_type=1/s?st=10a001"},{id:"lvyou",text:"旅游",key:"word",url:"http://lvyou.baidu.com/search/webapp/scene?fr=news&ssid=0&from=0&bd_page_type=1&uid=&font=0&step=1"}],B={heavy_snow:/^暴雪|^大雪/,moderate_snow:/^中雪/,light_snow:/^小雪/,snow_shower:/^阵雪/,heavy_rain:/^暴雨|^大暴雨|^大雨|^特大暴雨/,moderate_rain:/^中雨/,shower:/^阵雨/,light_rain:/^小雨/,thunder_shower:/^雷阵雨/,sleet:/^雨夹雪|冻雨/,cloudy:/^多云/,overcast:/^阴$|^阴天|^晴转/,sunny:/^晴$|^晴天|^阴转/,fog:/^雾/,dust:/^扬尘|^浮尘|^霾转/,sand_storm:/^沙尘暴|^强沙尘暴/,weather_default:/.*/},O="/static/news/webapp/webappandroid/page/index/img/weather-icons/",$="http://d.hiphotos.baidu.com/news/pic/item/8cb1cb1349540923174783549058d109b3de49ea.jpg",q="NEWS_COMMENT_CONTENT",U=18e5,G="NEWS_COMMENT_PRAISE",z=864e5;
e.extend(R,{getClassMap:r,getClassById:s,getClassTitleById:c,getClassOrderById:d,isTopic:n,isLocalNews:a,getLocalId:i,getLocalName:o,getShareConf:l,hasNoImageBtn:p,initNoImageMode:h,getSearchProductList:g,getWeatherIcon:f,getDefaultCityImage:m,getCommentContent:w,getCommentContentInfo:v,setCommentContent:y,delCommentContentInfo:x,getCommentPraise:_,addCommentPraise:S,getWXAppStoreURL:t,getSearchUrl:T,getWeatherUrl:C})}(Zepto),!function(e){function t(e){var t,n,a=webappandroid.local.canGPS,i=webappandroid.local.checkLastGPSPermit,o=webappandroid.local.callGPS;
a()&&i()?o(function(a){return null==a||!a.lat||!a.lng||null!=s&&s.lat==a.lat?void e(null,null,null):(s=a,t=new rocket.model.geo,void t.fetch({location:a.lat+","+a.lng,success:function(i,o,r){var s=t.parse(o,r),c={};s&&s.city?(s.province&&(c.province=s.province),s.city&&(c.city=s.city),s.district&&(c.county=s.district),n=new rocket.model.localid(c,null),n.fetch({success:function(t){var n;n=t.toJSON(),n&&n.displayname?e(a,s,n):e(a,s,null)},error:function(){e(a,s,null)}})):e(a,null,null)},error:function(){e(a,null,null)
}}))}):e(null,null,null)}function n(e,t,n){var a={gps:1,locname:n.displayname||"",loc:n.localid,province:t.province||"",city:t.city||"",district:t.district||"",circle:t.business||"",longitude:e.lng.toString(),latitude:e.lat.toString(),coor_type:"1",bduss:webappandroid.helper.cookieGet("BDUSS")||""};_smt(42,a),c%5==0&&_ss({act:"u_gps_st"}),c++}function a(e,t,a){if(null!=e){t||(t={}),a||(a={});try{n(e,t,a)}catch(i){}}}function i(e){function n(e,t,n){a(e,t,n),i(!1)}e?t(n):window.setTimeout(function(){t(n)
},6e4*d)}function o(e){d=e||10,window.setTimeout(function(){i(!0)},1e3)}var r=webappandroid.gpslog=webappandroid.gpslog||{},s=null,c=5,d=10;e.extend(r,{sendGPSLog:o})}(Zepto),!function(e){function t(e){return(10>e?"0":"")+e}function n(e,n){e=(""+e).length<13?1e3*e:e;var a,i,o,r,s=(new Date).getTime(),c=(s-e)/1e3;o=Math.round(c/86400),i=Math.round(c/3600),a=Math.round(c/60),r=Math.round(c);var d=!1;if("boolean"==typeof n&&(d=n,n=null),d){var l=new Date;return l.setTime(e),l.getFullYear()+"-"+t(l.getMonth()+1)+"-"+t(l.getDate())+" "+t(l.getHours())+":"+t(l.getMinutes())
}if(0>c)return"1分钟前";if(o>0&&4>o)return o+"天前";if(0>=o&&i>0)return i+"小时前";if(0>=i&&a>0)return a+"分钟前";if(0>=a&&r>0)return r+"秒钟前";if(0===r)return"刚刚";var l=new Date;l.setTime(e);var u=l.getFullYear()+"-"+t(l.getMonth()+1)+"-"+t(l.getDate()),p=t(l.getHours())+":"+t(l.getMinutes());return null!=n&&1===n?u:u+" "+p}function a(t,n){setTimeout(function(){var a=e('<link rel="'+(F()?"alternate ":"")+'stylesheet" />');e("head").append(a),a.attr("href",[t+(t.indexOf("?")>=0?"":"?")+e.param(n),(new Date).getTime()].join("&")),setTimeout(function(){a.remove()
},5e3)},0)}function i(t,n){var a=!1,i=function(){a||(a=!0,n.success())};setTimeout(i,500),e.ajax({type:"POST",url:t,dataType:"json",data:n.params,success:i})}function o(t,n){var i,o=R("fr"),r=R("from"),s=C()?1:2,c="0",d="http://nsclick.baidu.com/v.gif";o=o?o:"",r=r?r:"",!o&&r?o="844c"===r?"zizhu":"jisuhome":o||r||(o="zizhu"),0===tt.MODE_NOIMAGE.showImage&&(c="1"),i=e.extend({pid:107,wise:1,from:"iphone"===window.showType?"webapp":"lite",fr:o,soe:s,m_ni:c},t),n?a(d,i):setTimeout(function(){a(d,i)},100)
}function r(e,t){var n=e.params;if(/^chosen.*/.test(n.class)&&15===n.pos)var a="/news?tn=bdapilog&t=feed_ads";else var a="/news?tn=bdapilog&t=mob_ads&n="+n.class+"_"+n.pos;t?i(a,e):setTimeout(function(){i(a,e)},200)}function s(t,n,i){var o="http://smtlog.news.baidu.com/sn/api/webapplog",r={id:t,from:"news_webapp",pd:"webapp",os:e.os.iphone?"iphone":"android",baiduid:l("BAIDUID"),data:JSON.stringify(n)},s=g();s&&(r.cuid=s),i?a(o,r):setTimeout(function(){a(o,r)},100)}function c(e){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)
}function d(e){if(c(e)){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=t.exec(document.cookie);if(n)return n[2]||null}return null}function l(e){var t=d(e);return"string"==typeof t?t=decodeURIComponent(t):null}function u(e,t,n){if(c(e)){n=n||{};var a=n.expires;"number"==typeof n.expires&&(a=new Date,a.setTime(a.getTime()+n.expires)),document.cookie=e+"="+t+(n.path?"; path="+n.path:"")+(a?"; expires="+a.toGMTString():"")+(n.domain?"; domain="+n.domain:"")+(n.secure?"; secure":"")}}function p(e,t,n){u(e,encodeURIComponent(t),n)
}function h(e,t){t=t||{},t.expires=new Date(0),u(e,"",t)}function g(){var t=e.localStorage("NEWS_CUID")&&e.localStorage("NEWS_CUID").cuid,n=null,a=l("cuid")||l("BAIDUCUID")||"";return/baiduboxapp\/[^\/]+\/[^\/]+\/[^\/]+\/([^\/]+)\//.test(window.navigator.userAgent)&&(n=RegExp.$1),t||n||a||""}function f(t){e.ajax({type:"get",url:"http://127.0.0.1:7777/getcuid?callback=?",dataType:"jsonp",callback:"getCuid",success:t})}function m(e,t,n){try{window.localStorage.setItem(e,t)}catch(a){p(e,t,n)}}function w(e){try{return window.localStorage.getItem(e)
}catch(t){return l(e)}}function v(e){try{window.localStorage.removeItem(e)}catch(t){h(e)}}function b(){var e="_webappandroid_storage_test",t="ok";return m(e,t),t==w(e)?(v(e),!0):!1}function y(e,t){try{return window.localStorage.setItem(e,t),!0}catch(n){return!1}}function x(e){try{return window.localStorage.getItem(e)}catch(t){return"@@--not_from_localstorage--@@"}}function _(e){try{return window.localStorage.removeItem(e),!0}catch(t){return!1}}function k(){var e="_webappandroid_localstorage_test",t="ok";
return y(e,t)&&t==x(e)?(_(e),!0):!1}function S(e,t,n){return"translate"+(rocket.has3d?"3d":"")+"("+e+"px, "+t+"px"+(rocket.has3d?", "+n+"px)":")")}function T(t,n,a,i){if(0===a)return t!=n&&(t&&e(t).hide(),setTimeout(function(){n&&e(n).show()},0)),void(i&&i());n=e(n),t=e(t);var o=document.documentElement.clientWidth;t.css({"-webkit-transition-property":"-webkit-transform","-webkit-transform":S(0,0,0),"-webkit-transition-duration":"0ms","-webkit-transition-timing-function":"ease-out","-webkit-transition-delay":"initial"}),n.css({"-webkit-transition-property":"-webkit-transform","-webkit-transform":S((1===a?"":"-")+o,0,0),"-webkit-transition-duration":"0ms","-webkit-transition-timing-function":"ease-out","-webkit-transition-delay":"initial",display:"block"}),setTimeout(function(){function e(){t.css({display:"none","-webkit-transform":S(0,0,0),"-webkit-transition-duration":"0ms"}),n.css({display:"block","-webkit-transform":S(0,0,0),"-webkit-transition-duration":"0ms"})
}n.css({"-webkit-transform":S(0,0,0),"-webkit-transition-duration":"350ms"}),t.css({"-webkit-transform":S((1===a?"-":"")+o,0,0),"-webkit-transition-duration":"350ms"}),setTimeout(function(){setTimeout(function(){e(),i&&i()},0)},400)},0)}function C(){return/Android.*baidubrowser/.test(navigator.userAgent)}function I(e){return e?["#page","2",""==e.url?"emptyurl:"+e.nid:encodeURIComponent(e.url),encodeURIComponent(e.title),encodeURIComponent(e.site||"-"),e.ts,e.nid].join("/"):""}function A(e){return e=e.replace(/<([ac-z]|\w{2,})/gi,"&lt;$1"),e.replace(/([ac-z]|\w{2,})>/gi,"$1&gt;")
}function N(e,t,n,a){var i=Math.abs(e-n),o=Math.abs(t-a),r=Math.sqrt(Math.pow(i,2)+Math.pow(o,2)),s=o/r,c=Math.acos(s),d=180/(Math.PI/c);return d}function R(e){return(document.location.search.match(new RegExp("(?:^\\?|&)"+e+"=(.*?)(?=&|$)"))||["",null])[1]||(document.location.pathname.match(new RegExp(e+"=(.*?)(?=\\/)"))||["",null])[1]}function E(){e.os.ios&&window.devicePixelRatio>=2&&e.browser.version>=5&&e("head").append(e('<link rel="apple-touch-startup-image" href="http://wap.baidu.com/static/news/webapp/img/startup_640_920.jpg" />'))
}function P(t,n,a,i){var o=!1,r="http://127.0.0.1:6259/",s=r+t+"?"+n;e.ajax({url:s,dataType:"jsonp",success:function(e){o=!0,0==e.error?"function"==typeof a&&a(e):"function"==typeof i&&i()},error:function(){o||(o=!0,"function"==typeof i&&i())}});var c=setTimeout(function(){o||(o=!0,"function"==typeof i&&i(),c&&(clearTimeout(c),c=null))},2e3)}function D(e,t){P("getpackageinfo","packagename=com.baidu.news",e,t)}function L(e,t){P("sendintent","intent="+encodeURIComponent(e),null,function(){W()&&(t=tt.conf.getWXAppStoreURL()),t&&(location.href=t)
})}function B(t,n,a,i){e(t).off("click"),e(t).on("click",function(){var o=e(t),r="#Intent;launchFlags=0x10000000;component=com.baidu.gamebox/.SplashActivity;end",s=n||o.data("act"),c=a||o.data("app"),d=i||o.data("url");return c?(L(r,c),void(s&&_ss({act:s}))):void window.open(d)})}function O(t,n,a,i){e(t).off("click"),e(t).on("click",function(){var o=e(t),r=n||o.data("act"),s=a||o.data("app"),c=i||o.data("url"),d="#Intent;action=com.baidu.news.detail;launchFlags=0x10000000;component=com.baidu.news/.ui.NewsDetailActivity;S.topic=搜索;S.news_url="+encodeURIComponent(c)+";i.news_from=15;S.nid=1;end";
return s?(L(d,s),void(r&&_ss({act:r}))):void window.open(c)})}function $(e){var t="#Intent;action=android.intent.action.MAIN;launchFlags=0x10000000;component=com.baidu.news/.ui.IndexActivity";P("sendintent","intent="+encodeURIComponent(t),null,function(){e&&(location.href=e)})}function q(t,n,a){var t=e(t);src=t.data("href"),act=t.data("act"),o({act:act}),W()&&(src=tt.conf.getWXAppStoreURL()),a?window.open(src):setTimeout(function(){location.href=src},300),n&&n.stopPropagation()}function U(){var e,t=l("BAIDULOC"),n={};
return t?(e=t.split("_"),5==e.length?(n.mcx=e[0],n.mcy=e[1],n.citycode=e[3],n.ts=e[4],n):null):null}function G(){return"undefined"!=typeof window.showType&&"iphone"==window.showType?!0:!1}function z(){return/MQQBrowser/i.test(navigator.userAgent)}function M(){return/UCBrowser/i.test(navigator.userAgent)}function F(){return/baidubrowser/i.test(navigator.userAgent)}function H(){return/baiduboxapp/i.test(navigator.userAgent)}function W(){return/micromessenger/i.test(navigator.userAgent)}function Z(t){e("#wrapper").append(t)
}function j(t){e("head").append('<style type="text/css">'+t+"</style>")}function J(e){var t=this;if(void 0!=t._imgBase64)return void e(t._imgBase64);var n=new Image;n.onerror=function(){t._imgBase64=!1,e(t._imgBase64)},n.onload=function(){t._imgBase64=1==n.width,e(t._imgBase64)},n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACGFjVEwAAAABAAAAAcMq2TYAAAANSURBVAiZY2BgYPgPAAEEAQB9ssjfAAAAGmZjVEwAAAAAAAAAAQAAAAEAAAAAAAAAAAD6A+gBAbNU+2sAAAARZmRBVAAAAAEImWNgYGBgAAAABQAB6MzFdgAAAABJRU5ErkJggg=="
}function Y(){}function V(e,t){if("undefined"!=typeof e.naturalWidth)t({w:e.naturalWidth,h:e.naturalHeight,t:!0});else{var n=new Image;n.src=e.src,n.onload=function(){t({w:n.width,h:n.height,t:!1})}}}function Q(e,t){return t?e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}):e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function X(e,t){var n=window._testEl=window._testEl||document.createElement("div");e=Q(e,!1);var a=void 0!=n.style[e];return null==t?a?e:null:(a&&(n.style[e]=t),null!=n.style[e])
}function K(){if(W()&&G)var t=e("body"),n=e('<iframe src="http://nsclick.baidu.com/v.gif?pid=107&wise=1&from=topic&fr=&soe=2&m_ni=0&act=hackweixin" style="display:none;"></iframe>').on("load",function(){setTimeout(function(){n.off("load").remove()},0)}).appendTo(t)}function et(){var e=document.referrer;return e&&/wappass.baidu.com\/passport/i.test(e)?!0:!1}window.webappandroid=window.webappandroid||{};var tt=window.webappandroid;helper=tt.helper=tt.helper||{};var nt=function(e,t){var n=document.createElement("script");
n.onload=n.onreadystatechange=function(){var e=n.readyState;if("undefined"==typeof e||"loaded"===e||"complete"===e)try{t&&t()}finally{n.onload=n.onreadystatechange=null,n=null}},n.type="text/javascript",n.charset="utf-8",n.src=e,(document.head||document.documentElement).appendChild(n)};e.extend(helper,{getFormatedDate:n,storageSet:m,storageGet:w,storageRemove:v,storageTest:b,cookieSet:p,cookieGet:l,cookieRemove:h,cuidGet:g,localStorageSet:y,localStorageGet:x,localStorageRemove:_,localStorageTest:k,slideAnimate:T,checkSoe:C,getCarouselImageUrl:I,filterHTMLTag:A,getAngle:N,queryParam:R,fixStartupImage:E,invokeApp:L,setupInvokeGame:B,setupInvokeApp:O,checkNewsClient:D,openNewsClient:$,clickHandler:q,sendSMTStat:s,sendNSClickStat:o,sendFAStat:r,getLocInfoFromCookie:U,isIOS:G,isUC:M,isQQ:z,isBD:F,isBaiduBox:H,isWeiXin:W,addHTML:Z,addCSS:j,getCuid:f,moniter:Y,getImgNaturalDimensions:V,isCanImgBase64:J,domCssConvert:Q,probableTestCss:X,hackWeixinForIOS:K,isFromPassport:et,loadScript:nt}),window._ch=tt.helper.clickHandler,window._ss=tt.helper.sendNSClickStat,window._sf=tt.helper.sendFAStat,window._smt=tt.helper.sendSMTStat
}(Zepto),!function(e){function t(){return d()?k:y}function n(){var e=v.helper.localStorageGet("NEWS_WHOLECITY_INFO");return JSON.parse(e)}function a(e,t){k.localid=e,k.displayname=t}function i(){return S}function o(e,t){S={localid:e,displayname:t}}function r(e,t,n){a.apply(this,arguments),v.helper.localStorageSet(x,JSON.stringify(k)),v.helper.localStorageSet("NEWS_WHOLECITY_INFO",JSON.stringify(n))}function s(e,t,n){o.apply(this,arguments),S.ts=n,v.helper.localStorageSet(_,JSON.stringify(S))}function c(){var t;
if(t=v.helper.localStorageGet(x))try{return k=JSON.parse(t),!0}catch(n){k=e.extend({},y),v.helper.localStorageRemove(x)}return!1}function d(){return c()}function l(){var e,t=null;if(e=v.helper.localStorageGet(_))try{t=JSON.parse(e)}catch(n){v.helper.localStorageRemove(_)}return t&&t.ts}function u(){var e;if(e=v.helper.localStorageGet(_))try{return S=JSON.parse(e),!0}catch(t){S=null,v.helper.localStorageRemove(_)}return!1}function p(){T=!0}function h(){return T}function g(e){window.setTimeout(function(){},3e3),navigator.geolocation.getCurrentPosition(function(t){var n=null;
t&&t.coords&&(n={lat:t.coords.latitude,lng:t.coords.longitude,ts:t.timestamp}),window.setTimeout(function(){v.helper.localStorageSet(C,"1_"+t.timestamp)},10),e(n,99)},function(t){console.info("gps-error:"+JSON.stringify(t)),1===t.code?rocket.utils.tip("您禁止了系统获取您的位置，请在设置中更改"):2===t.code?rocket.utils.tip("获取地理位置无响应"):3===t.code&&rocket.utils.tip("获取地理位置超时"),window.setTimeout(function(){v.helper.localStorageRemove(C)},10),e(null,t.code)},{enableHighAccuracy:!1,timeout:6e4,maximumAge:36e4})}function f(t,n){e.ajax({type:"get",url:"http://127.0.0.1:7777/geolocation?timeout=10000&gps=1&callback=?",dataType:"jsonp",callback:"getGeo",success:t,error:n})
}function m(){return navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition?!0:!1}function w(){var e,t,n;try{if(e=v.helper.localStorageGet(C),null!=e&&"string"==typeof e&&e.indexOf("_")>0&&(t=e.substring(e.indexOf("_")+1),t=parseInt(t),t&&(n=((new Date).getTime()-t)/1e3/60/60,12>n)))return!0}catch(a){}return!1}var v=window.webappandroid=window.webappandroid||{},b=v.local=v.local||{},y={localid:"0",displayname:"北京"},x="NEWS_CITY_INFO",_="NEWS_GPS_CITY_INFO",k=e.extend({},y),S=null,T=!1,C="LOCALNEWS_GPS_PERMIT";
e.extend(b,{getCityInfo:t,getWholeCityInfo:n,setCityInfo:a,getGpsCityInfo:i,setGpsCityInfo:o,saveCityInfo:r,syncCityInfo:c,isUserSetCityInfo:d,saveGpsCityInfo:s,getGpsCityInfoVersion:l,syncGpsCityInfo:u,setGpsFailed:p,getGpsFailed:h,canGPS:m,getPushGeo:f,callGPS:g,checkLastGPSPermit:w})}(Zepto),!function(e){function t(){return a.helper.cookieGet("BDUSS")}function n(){var e=t();return!!e&&e.length>20}var a=window.webappandroid=window.webappandroid||{},i=a.login=a.login||{};e.extend(i,{getBDUSS:t,isLoggedIn:n})
}(Zepto),!function(e){function t(e,t){var o=i.subscribe.getSubscribeInfo(e),r={};return r.column=a(o.type),r.tag=o.name?"local"==o.type?"本地":o.name:"推荐",r.mark=n(t),r}function n(e){switch(e){case"z":return 26;case"origin":return 27;case"hot":return 1;case"recommend":return 2;default:return 0}}function a(e){return/^(chosen|local|tag|info)/.test(e)?1:2}var i=window.webappandroid=window.webappandroid||{},o=i.smtlog=i.smtlog||{};e.extend(o,{getSMTLogInfo:t,getMark:n})}(Zepto),!function(){function e(e,i,g,m){var b=$(i),y=g?$(g):b;
t(T,C,m),C=y,T=b,v=!0,c(y),s(y),r(y),o(y),d(),u(e.targetTouches),n(y),l(y,x),y.addClass("moving"),e.preventDefault(),b.on("touchmove",function(e){w||(w=!0,f=e.targetTouches,p(f),u(f),l(y,x),a(),h(y,f),setTimeout(function(){w=!1},30)),e.preventDefault()}).on("touchend",function(e){f=e.changedTouches,e.preventDefault(),t(b,y,m)})}function t(e,t,n){v&&(e.off("touchmove touchend"),i(t),t.removeClass("moving"),n&&n(t,t.index()),v=!1)}function n(e){S.insertBefore(e)}function a(){var e,t=Math.floor(_.top/b+.5);
if(t>I){for(e=t-I,$next=S.next(),$next.hasClass("moving")&&($next=$next.next());--e>0;)$next=$next.next(),$next.hasClass("moving")&&($next=$next.next());S.insertAfter($next),I=t}else if(I>t){for(e=I-t,$prev=S.prev(),$prev.hasClass("moving")&&($prev=$prev.prev());--e>0;)$prev=$prev.prev(),$prev.hasClass("moving")&&($prev=$prev.prev());S.insertBefore($prev),I=t}}function i(e){e.insertBefore(S),S.remove(),e.css({position:"relative",top:"0px"})}function o(e){b=e.height()}function r(e){I=e.index()}function s(e){k.minTop=0,k.maxTop=e.parent().children().last()[0].offsetTop
}function c(e){_.top=parseInt(e[0].offsetTop)||0}function d(){x.x=0,x.y=0}function l(e,t){_.top+=t.y,_.left+=t.x,_.top<k.minTop&&(_.top=k.minTop),_.top>k.maxTop&&(_.top=k.maxTop),e.css({top:_.top+"px",left:"0px",right:"0px",position:"absolute"})}function u(e){var t=e[0];y.x=t.clientX,y.y=t.clientY}function p(e){var t=e[0];x.x=t.clientX-y.x,x.y=t.clientY-y.y}function h(e,t){var n=t[0];n.clientY<=b+5?(window.scrollBy(0,-10),g(e,0,-10)):n.clientY>=window.innerHeight-b-5&&(window.scrollBy(0,10),g(e,0,10))
}function g(e,t,n){_.top+=n,_.left+=t,_.top<k.minTop&&(_.top=k.minTop),_.top>k.maxTop&&(_.top=k.maxTop),e.css({top:_.top+"px"}),a()}var f,m=window.webappandroid=window.webappandroid||{},w=!1,v=!1,b=46,y={x:0,y:0},x={x:0,y:0},_={top:0,left:0},k={minTop:0,maxTop:0},S=$("<li></li>"),T=null,C=null,I=0;m.startdrag=e}(),!function(e){function t(e){var t=b;if(!e)return t;switch(e.type){case"focus":case"info":case"tag":case"search":case"chosen":case"image":t=e.type+":"+encodeURIComponent(e.name);break;case"local":var n=m.local.getCityInfo();
t=e.type+":"+n.localid+":"+encodeURIComponent(n.displayname);break;case"news":case"newsman":case"author":t=e.type+":"+encodeURIComponent(e.id)+":"+encodeURIComponent(e.name)}return t}function n(){var n;return n=e.map(g(),function(n){return e.extend({},n,{nameinrouter:t(n)})})}function a(e){return/^local/.test(e)}function i(){return/^#page\/3(:|\/)/.test(window.decodeURIComponent(window.location.hash))}function o(e){return/^local:(\d+)/.test(e)?RegExp.$1:m.local.getCityInfo().localid}function r(e){return/^local:\d+:(.+)$/.test(e)?RegExp.$1:m.local.getCityInfo().displayname
}function s(e){if(/^\d+$/.test(e))switch(e-=0){case 0:return"default";case 1:return"chosen";case 2:return"focuspic"}return/^([^:]+):.*$/.test(e)?RegExp.$1:"local"==e?"local":"oldfocus"==e?"oldfocus":"chosen"}function c(e){var t,n=s(e);switch(n){case"tag":t="话题";break;case"news":t="媒体";break;case"newsman":t="记者";break;case"author":t="专栏";break;case"forward":t="转载媒体";break;case"image":t="美图";break;case"myfavor":t="我的收藏";break;default:t="新闻"}return t}function d(e){return/:([^:]+)$/.test(e)?RegExp.$1:""
}function l(e){return/:([^:]+):/.test(e)?RegExp.$1:"0"}function u(e){return{type:s(e),name:d(e),id:l(e),displaytype:c(e)}}function p(){return v.slice(0)}function h(e){for(var t=e.length-1;t>=0;)("focus"==e[t].type||"beauty"==e[t].type||"radio"==e[t].type||"meizitu"==e[t].type)&&e.splice(t,1),t--;return e}function g(){var e,t,n=m.subdata;return t=n&&(e=n.getData())&&e.tag&&e.tag.length?e.tag.slice(0):p(),h(t)}function f(e,t,n){for(var a=g(),i=0;i<a.length;i++)if(a[i].type==e&&a[i].name==t&&("tag"!=e&&"info"!=e&&"search"!=e&&n&&a[i].id==n||"tag"==e||"info"==e||"search"==e||"-1"==n||void 0==n)||"local"==e&&"local"==a[i].type||"focus"==e&&"focus"==a[i].type||"chosen"==e&&"chosen"==a[i].type)return!0;
return!1}var m=window.webappandroid=window.webappandroid||{},w=m.subscribe=m.subscribe||{},v=[{name:"推荐",type:"chosen"},{name:"百家",type:"news",id:"478"},{name:"本地",type:"local"},{name:"图片",type:"image",id:"1"},{name:"娱乐",type:"info"},{name:"社会",type:"info"},{name:"军事",type:"info"},{name:"互联网",type:"info"},{name:"科技",type:"info"},{name:"女人",type:"info"},{name:"搞笑",type:"info"},{name:"生活",type:"info"},{name:"国际",type:"info"},{name:"国内",type:"info"},{name:"体育",type:"info"},{name:"汽车",type:"info"},{name:"财经",type:"info"},{name:"房产",type:"info"},{name:"时尚",type:"info"},{name:"教育",type:"info"},{name:"游戏",type:"info"},{name:"旅游",type:"info"},{name:"人文",type:"info"},{name:"创意",type:"info"},{name:"互联网+",type:"tag"}],b="chosen:"+encodeURIComponent("推荐");
e.extend(w,{getSubscribes:n,getDefaultSubscribeData:p,isLocalNews:a,isSubscribeExist:f,getLocalId:o,getLocalName:r,getNameInRouter:t,getNewsType:s,getDisplayType:c,getSubscribeName:d,getSubscribeId:l,getSubscribeInfo:u,isFromPageNews:i})}(Zepto),!function(e){function t(){var e=null;if(e=d.helper.localStorageGet(u),"string"==typeof e&&e)try{e=JSON.parse(e)}catch(t){console.log("JSON.parse error")}return e}function n(t){var n=t;e.isPlainObject(t)&&(n=JSON.stringify(t)),d.helper.localStorageTest()&&d.helper.localStorageSet(u,n)
}function a(e,n){for(var a=p||t(),i=a[n],o=i.length-1;o>=0;o--)if(i[o].name==e.name&&("model"==n||i[o].type==e.type))return!0;return!1}function i(e,n){for(var a=p||t(),i=a[n],o=i.length-1;o>=0;o--)if(i[o].name==e.name&&("model"==n||i[o].type==e.type))return i[o];return null}function o(e,i){var o=p||t(),r=o[i];a(e,i)||r.push(e),p=o,n(o)}function r(a,o){var r=p||t(),s=r[o];e.isArray(s)&&(model=i(a,o),model&&e.extend(model,a)),p=r,n(r)}function s(e,i){var o=p||t(),r=o[i];if("model"==i&&r.length<=5)return!1;
for(var s=r.length-1;s>=0;s--)r[s].name!=e.name||"model"!=i&&r[s].type!=e.type||r.splice(s,1);return p=o,n(o),!a(e,i)}function c(e){_collect=e,n(_collect)}var d=window.webappandroid=window.webappandroid||{},l=d.modelopen=d.modelopen||{},u="MODELOPENKEY",p=null;e.extend(l,{addModel:o,getModel:i,getLocalCollect:t,init:c,isExist:a,removeModel:s,updateModel:r})}(Zepto),!function(e){var t,n;rocket.globalview.audioplayer=rocket.globalview.extend({el:".play-container",NS:{play:function(){window.setTimeout(function(){}),_ss({act:"audio_play"})
},pause:function(){_ss({act:"audio_pause"})},close:function(){_ss({act:"audio_close"})},move:function(){_ss({act:"audio_move"})},playComplete:function(){_ss({act:"audio_completeplay"})},bufferComplete:function(){_ss({act:"audio_completebuffer"})}},events:{"click .play":"onPlay","click .close":"onClose"},showTitle:function(e,a){t&&window.clearTimeout(t),n&&window.clearTimeout(n),e[0].style.textIndent="0px",e.text(a),t=window.setTimeout(function(){function t(){return i.scrollWidth>i.clientWidth?!0:!1
}function a(e){n=window.setTimeout(function(){t()?o-=12:o=0,i.style.textIndent=o+"px",a(0==o||i.scrollWidth==i.clientWidth?r:s)},e)}var i=e[0],o=0,r=2e3,s=500;t()&&a(r)},100)},stopAction:function(e){e.preventDefault(),e.stopPropagation()},setBarPercent:function(e,t){e.css("width",100*t+"%")},setPanelTime:function(e,t,n){var a=t;void 0!=n&&(a+="/"+n),e.text(a)},canTotal:function(){var e=this.engine.getTotalTime();return 1/0==e||10>e||6e3==e?!1:!0},showState:function(){var e=this.engine,t=this.ui,n=this,a=e.getTotalTime(),i=e.getCurTime(),o=e.getTotalTimeFormate(),r=e.getCurTimeFormate();
n.canTotal()?(n.setPanelTime(t.timePanel,r,o),n.setBarPercent(t.processingBar,i/a),n.setBarPercent(t.loadedBar,e.getCanPlayPercent()),t.showBox.show()):(n.setPanelTime(t.timePanel,r),t.showBox.hide())},registerEvents:function(){var t=this.touchEvents();this.ui.showBox.on("touchstart",e.proxy(t.start,this)).on("touchend touchcancel",e.proxy(t.end,this)).on("touchmove",e.proxy(t.move,this)),this.engine.on(AudioEngine.EVENTS.STATECHANGE,this.onStateChange,this),this.engine.on(AudioEngine.EVENTS.POSITIONCHANGE,this.onPositionChange,this)
},unregisterEvents:function(){this.ui.showBox.off("touchstart touchmove touchend touchcancel"),this.engine.off(AudioEngine.EVENTS.POSITIONCHANGE,this.onPositionChange,this),this.engine.off(AudioEngine.EVENTS.STATECHANGE,this.onStateChange,this)},onStateChange:function(e){var t=this,n=t.ui;n.userBox.isDragging||t.showState(),e&&e.newState&&((e.newState==AudioEngine.STATES.PAUSE||e.newState==AudioEngine.STATES.END)&&n.play.removeClass("pause"),e.newState==AudioEngine.STATES.PLAYING&&n.play.addClass("pause"),e.newState==AudioEngine.STATES.END&&t.NS.playComplete(),t.engine.getTotalTime()==t.engine.getBufferedTime&&t.NS.bufferComplete())
},onPositionChange:function(){var e=this,t=e.ui;t.userBox.isDragging||e.showState()},onPlay:function(e){this.engine.togglePlay(),this.stopAction(e),this.engine.audio.paused?this.NS.pause():this.NS.play()},onClose:function(t){var n=this;n.hide(),e("body").removeClass("fixed"),n.stopAction(t),window.setTimeout(function(){n.engine.pause(),n.engine.stop(),n.NS.close()},10)},touchEvents:function(){function e(e){return 1!=e.touches.length?!1:!0}function t(){o=0,r=0,c.setPanelTime(d.usertimePanel,l.getCurTimeFormate(),l.getTotalTimeFormate()),c.setBarPercent(d.userCurBar,l.getCurTime()/l.getTotalTime()),d.userBox.show()
}function n(){s=c.canTotal()}function a(n){if(e(n)&&s){c.stopAction(n),d.userBox.isDragging||(t(),d.userBox.isDragging=!0);var a=event.touches[0].pageX;if(Math.abs(a-r)>5){var i=0;a>r?i+=10:i-=10,o=(a+i)/c.$el.width(),o>1?o=1:o,c.setBarPercent(d.processingBar,o),c.setBarPercent(d.userProcessingBar,o),c.setPanelTime(d.usertimePanel,l.formateTime(l.getTotalTime()*o),l.getTotalTimeFormate()),r=a}}}function i(){d.userBox.hide(),d.userBox.isDragging&&o>0&&window.setTimeout(function(){c.engine.pause(),window.setTimeout(function(){c.engine.setCurPosition(o),window.setTimeout(function(){c.engine.play(),d.userBox.isDragging=!1,c.NS.move()
},100)},100)},10)}var o=0,r=0,s=!1,c=this,d=this.ui,l=this.engine;return{start:n,move:a,end:i}},play:function(t){var n=t.title||"",a=t.src||"",i=this;if(""!=a){if(e("body").hasClass("fixed")||e("body").addClass("fixed"),this.showTitle(this.ui.titlePanel,n),this.show(),a==this.engine.getUrl()&&(i.engine.getState()==AudioEngine.STATES.BUFFERING||i.engine.getState()==AudioEngine.STATES.PAUSE||i.engine.getState()==AudioEngine.STATES.PLAYING))return void i.engine.play();i.engine.pause(),window.setTimeout(function(){i.engine.load(a),t.autoplay&&i.engine.play()
},100)}},init:function(e){if(!e.engine)throw new Error(" The player need an engine !");var t=this.ui={},n=this.$el.appendTo("#wrapper");this.engine=e.engine,t.playerBox=n.find("*[data-role='player-box']"),t.timePanel=n.find("*[data-role='timeShow']"),t.titlePanel=n.find("*[data-role='titleShow']"),t.showBox=n.find("*[data-role='showBox']"),t.processingBar=n.find("*[data-role='processingBar']"),t.processBar=n.find("*[data-role='processBar']"),t.loadedBar=n.find("*[data-role='loadedBar']"),t.processingDot=n.find("*[data-role='processingDot']"),t.close=n.find("*[data-role='close']"),t.play=n.find("*[data-role='play']"),t.userBox=n.find("*[data-role='userBox']"),t.userProcessingBar=n.find("*[data-role='userProcessBar']"),t.userCurBar=n.find("*[data-role='userCurBar']"),t.usertimePanel=n.find("*[data-role='userTimeShow']")
}}),webappandroid.helper.addCSS('.default-player.play-container{display:none;width:100%;background-color:rgba(0,0,0,.6);position:fixed;left:0;right:0;bottom:0;text-align:right;-webkit-transition:-webkit-transform .3s;-webkit-user-select:none}\n.default-player .main-box{height:34px;width:100%;line-height:34px;color:#fff}\n.default-player .show-box{width:100%;position:absolute;top:-24px;padding-top:20px;height:4px;padding-bottom:10px}\n.default-player .show-box-wrapper{position:absolute;bottom:10px;width:100%;height:4px}\n.default-player .show-box .process-bar{background-color:rgba(0,0,0,.8);position:absolute;bottom:0;left:0;right:0;height:100%;width:100%}\n.default-player .show-box .loading-bar{position:absolute;bottom:0;background-color:rgba(134,134,134,.98);height:100%;width:0}\n.default-player .show-box .processing-bar{position:absolute;bottom:0;width:0;height:100%;background-color:rgba(35,155,240,.97);font-size:1px}\n.default-player .show-box .processing-dot{position:absolute;width:18px;height:18px;right:-13px;margin-top:-7px;background:url(/static/news/webapp/webappandroid/globalview/audioplayer/img/dot_e43da90.png) no-repeat center center;background-size:10px 10px}\n.default-player .left-panel{float:left;width:38px;height:100%;background-color:rgba(0,0,0,.6)}\n.default-player .right-panel{float:right;height:100%}\n.default-player .right-panel .close{display:block;height:100%;width:35px;text-align:center;background:url(/static/news/webapp/webappandroid/globalview/audioplayer/img/stop_303f852.png) 11px 10px no-repeat;-webkit-background-size:12px 12px}\n.default-player .right-panel .close:active{}\n.default-player .main-panel{overflow:hidden;position:relative;text-align:left;margin-left:44px;display:-webkit-box;display:box}\n.default-player .time{font-size:12px;max-width:80px;padding-left:16px;padding-right:16px}\n.default-player .title{overflow:hidden;white-space:nowrap;font-size:14px;position:relative;-webkit-box-flex:1;box-flex:1}\n.default-player .play{float:left;width:100%;height:100%;font-size:0;background:url(/static/news/webapp/webappandroid/globalview/audioplayer/img/play_b01b5f2.png) no-repeat center center;background-size:20px 20px}\n.default-player .play.pause{background:url(/static/news/webapp/webappandroid/globalview/audioplayer/img/pause_2855de7.png) no-repeat center center;background-size:20px 20px}\n.default-player .play.loading{}\n.play-container{z-index:9999}\n.play-container .process-bar{z-index:10000}\n.play-container .loading-bar{z-index:10001}\n.play-container .processing-bar{z-index:10002}\n.play-container .processing-dot{z-index:10003}\n.main-box .play,.main-box .close{z-index:10010}\n.default-player .user-box{position:fixed;width:200px;display:none;height:40px;top:50%;left:50%;margin-left:-100px;margin-top:-5px;background-color:rgba(0,0,0,.6);line-height:41px;color:#fff;text-align:center;font-size:28px;border-radius:4px;box-shadow:#666 0 0 10px;-webkit-box-shadow:#666 0 0 10px}\n.default-player .user-box-wrapper{width:100%;height:4px;overflow:hidden;position:absolute;bottom:0;left:0;border-bottom-left-radius:4px;border-bottom-right-radius:4px}\n.default-player .user-box .process-bar{background-color:rgba(0,0,0,.8);position:absolute;bottom:0;left:0;right:0;height:4px;width:100%}\n.default-player .user-box .loading-bar{position:absolute;bottom:0;background-color:rgba(134,134,134,.98);height:4px;width:0}\n.default-player .user-box .processing-bar{position:absolute;bottom:0;width:0;background-color:rgba(35,155,240,.97);height:4px;font-size:1px}\n.default-player.player-trig-wrapper{position:relative;text-align:center;overflow:hidden;margin:0 11px}\n.default-player.player-trig-wrapper>div{display:inline-block;font-size:0}\n.default-player .player-trig-pic{max-width:100%;min-width:200px;border:0}\n.default-player .player-trig-info{position:absolute;top:50%;left:50%;width:160px;height:112px;margin-left:-80px;margin-top:-56px;text-align:center}\n.default-player .player-trig-img{background:url(/static/news/webapp/webappandroid/globalview/audioplayer/img/playit1_dcb389b.png) no-repeat;-webkit-background-size:75px 75px;width:76px;height:76px;display:inline-block}\n.default-player .player-trig-title{height:32px;padding-top:22px;font-size:18px;line-height:22px;text-align:center;color:#fff;text-shadow:1px 1px rgba(0,0,0,.3)}\n.fixed #wrapper>div[id*=view]:after{content:" ";height:45px;display:block;clear:both;font-size:0}\n.fixed #image_list:after{background-color:#161616}'),webappandroid.helper.addHTML('<!--播放器-->\n<div class="play-container default-player" data-role="player-box">\n    <div class="user-box" data-role="userBox">\n        <div class="user-box-wrapper">\n            <div class="process-bar">\n            </div>\n            <div class="processing-bar" data-role="userProcessBar" style="width: 0%;">\n            </div>\n            <div class="loading-bar" data-role="userCurBar" style="width: 0%;">\n            </div>\n        </div>\n        <div class="usertime-show" data-role="userTimeShow">00:00/00:00</div>\n    </div>\n    <div class="show-box" data-role="showBox">\n        <div class="show-box-wrapper">\n            <div class="process-bar" data-role="processBar"></div>\n            <div class="processing-bar" data-role="processingBar" style="width: 0%;">\n                <div class="processing-dot" data-role="processingDot"></div>\n            </div>\n            <div class="loading-bar" data-role="loadedBar" style="width: 0%;"></div>\n        </div>\n    </div>\n    <div class="main-box">\n        <div class="left-panel"><a class="play on" data-role="play" href="javascript:void(0);"></a></div>\n        <div class="right-panel">\n            <a class="close" data-role="close"></a>\n        </div>\n        <div class="main-panel">\n            <div class="title" data-role="titleShow">科技早报打爆了小米卖疯了-《阿凡达》 2014.07.25</div>\n            <div class="time" data-role="timeShow">-:-/-:-</div>\n        </div>\n    </div>\n</div>\n')
}(Zepto),!function(e){rocket.globalview.gotop=rocket.globalview.extend({className:"gotop-globalview",events:{click:"onclick"},init:function(){var e=this;e.isEnabled=!0,e.render(),e.initGoTop()},render:function(){this.$el.appendTo("#wrapper")},initGoTop:function(){var t,n=this;e.ui.gotop(n.$el,{useAnim:!1,touchendHandler:function(){var a=this;return clearTimeout(t),window.pageYOffset>e(window).height()&&n.isEnabled?t=setTimeout(function(){a.show()},1e3):a.hide(),!1}}).fix({bottom:200,right:10})},registerEvents:function(){var e=this;
e.ec,e.on("routechange",e.onroutechange,e)},onroutechange:function(e){var t=this,n=e.from||null,a=e.to||null,i=(n&&n.action||null,a&&a.action||null);e.pageviews,t.isEnabled="managesubscribe"==i?!1:!0},onclick:function(){var e=this;e.$el.addClass("press"),setTimeout(function(){e.$el.removeClass("press")},300),_ss({act:"gotop"})}})}(Zepto),!function(){rocket.globalview.levelnav=rocket.globalview.extend({init:function(){var e=this;e.routeTrail=[],e.readConfig()},readConfig:function(){var e=this;e.upLevelRoutePattern={index:[],searchbox:[/^index/,/^$/],search:[/^index/,/^$/,/^searchbox/,/^searchsubscribe/],page_other:[/^index/,/^$/,/^search/,/^preview/,/^topic/,/^message/,/^favor/],page_search:[/^index/,/^$/,/^search/,/^preview/,/^message/,/^favor/],page_focuspic:[/^index/,/^$/,/^preview/,/^message/,/^favor/],page_0:[/^index/,/^$/,/^search/,/^preview/,/^page\/[a-z]+/,/^message/,/^favor/],page_1:[/^index/,/^$/,/^search/,/^preview/,/^page\/[a-z]+/,/^message/,/^favor/],page_3:[/^$/,/^page\/[a-z]+/],image:[/^index/,/^page/],userhome:[/^index/,/^$/],city:[/^index/,/^$/,/^preview/],province:[/^city/,/^$/],preview_other:[/^index/,/^$/,/^subscribe/,/^searchsubscribe/,/^managesubscribe/,/^page/,/^rank/,/^preview\//],preview_forward:[/^index/,/^$/,/^subscribe/,/^searchsubscribe/,/^managesubscribe/,/^page/,/^rank/,/^preview\/[^f].+/],message:[/^index/,/^userhome/],favor:[/^index/,/^userhome/],subscribe:[/^index/,/^$/],searchsubscribe:[/^index/,/^$/,/^subscribe/,/^modelopen/],modelopen:[/^index/,/^$/,/^userhome/],managesubscribe:[/^index/,/^$/,/^subscribe/],comment:[/^index/,/^$/,/^page/],topic:[/^index/,/^$/,/^preview/],feedback:[/^index/,/^$/,/^page/,/^search/],rank:[/^index/,/^$/],album:[/^index/],trenddetail:[/^index/,/^preview/,/^page/,/^$/],trendlist:[/^trenddetail/,/^$/],trendcomment:[/^trenddetail/,/^$/]}
},registerEvents:function(){var e=this;e.ec,e.on("routechange",e.onroutechange,e)},onroutechange:function(e){var t=this,n=e.from||null,a=e.to||null;n&&n.action||null,a&&a.action||null,e.pageviews,a&&t.addRoute()},getUpLevel:function(){return this.getNearestUpLevelRoute.apply(this,arguments)},getNearestUpLevelRoute:function(e,t){if(!e)return null;var n,a=this,i=a.routeTrail;if(n=a.upLevelRoutePattern[e],!n||0==n.length)return null;t=t||0,1==(1&t)&&i.length&&i.pop();for(var o=i.length-1;o>=0;o--)if(4!=(4&t)||i[o]!=a.getCurRoute())for(var r=0;r<n.length;r++)if(n[r].test(i[o])){if(o>0&&2==(2&t)&&n[r].test(a.getCurRoute())&&n[r].test(i[o-1]))break;
return i.splice(o+1,i.length-o-1),{index:o,route:i[o]}}return null},addRoute:function(){var e=this;e.routeTrail.push(e.getCurRoute())},getCurRoute:function(){return location.hash.replace(/^#/,"")},showRouteTrail:function(){var e=this,t=e.routeTrail.length;for(console.log(""),console.log("[ route trail stack ]");t>0;)console.log("    "+e.routeTrail[t-1]),t--}})}(Zepto),!function(e){rocket.model.remotesubdata=rocket.model.extend({initialize:function(){var e=this;e.dataCache={}},saveParams:function(e){return{method:"POST",querystring:"?tn=bdapibaiyue&t=setuserdata",data:{bduss:e.bduss||"",cuid:e.cuid||"",text:e.text||"",ischeck:0,type:"tag",OS:"android",ver:6,from:"webapp",rand:(new Date).getTime()}}
},fetchParams:function(e){return{method:"POST",querystring:"?tn=bdapibaiyue&t=getuserdata",data:{bduss:e.bduss||"",cuid:e.cuid||"",type:"tag",OS:"android",ver:6,from:"webapp",rand:(new Date).getTime()}}},urlHandler:function(){var e="news.baidu.com"==location.host.toLowerCase()?"/i":"/news";return e},getData:function(){var e=this;return e.dataCache},fetch:function(t){var n=this,a=n.fetchParams(t),i=e.extend({type:"POST",url:n.urlHandler()+a.querystring,data:a.data},t);return Backbone.Model.prototype.fetch.call(n,i)
},save:function(t){var n=this,a=n.saveParams(t),i=e.extend({type:"POST",url:n.urlHandler()+a.querystring,data:a.data},t);return Backbone.Model.prototype.fetch.call(n,i)},filterData:function(e){for(var t=e.tag,n=0;n<t.length;n++)"chosen"==t[n].type&&(t[n].name="推荐"),"focus"==t[n].type&&t.splice(n,1)},parse:function(e){var t,n=this;return!e||e.errno?{}:(t=e.data,n.filterData(t),n.dataCache=t,t)}})}(Zepto),!function(){var e="NEWS_SUBSCRIBE_DATA",t="NEWS_SUBSCRIBE_PUSH_DATA",n="NEWS_SUBSCRIBE_LOGIN_PUSH_DATA";
rocket.globalview.subdata=rocket.globalview.extend({init:function(e){var t=this;t.model=new rocket.model.remotesubdata(null,e),t.data=null,t.pushSub=[{name:"图片",type:"image",id:"1"},{name:"互联网+",type:"tag"}],setTimeout(function(){t.initData()},100)},registerEvents:function(){var e=this;e.ec,e.on("routechange",e.onroutechange,e),e.model.on("sync",e.onsync,e)},isLoggedIn:function(){return webappandroid.login.isLoggedIn()},addLocalSub:function(){var e,a=this,i=webappandroid.helper.localStorageTest(),o=null,r=null,s=null;
if(i){try{r=webappandroid.helper.localStorageGet(n),o=webappandroid.helper.localStorageGet(t)}catch(c){r=null,o=null}if(s=JSON.stringify(a.pushSub),a.isLoggedIn()){if(r!==s){for(var d=a.pushSub.length-1;d>=0;d--)"图片"==a.pushSub[d].name?e=3:"互联网+"==a.pushSub[d].name&&(e=a.data.tag.length),a.addSub(a.pushSub[d],e);webappandroid.helper.localStorageSet(n,s)}}else o!==s&&(e=a.data.tag.length-1,a.addSub(a.pushSub[1],e),webappandroid.helper.localStorageSet(t,s))}},initData:function(){var e=this;e.isLoggedIn()?e.model.fetch({bduss:webappandroid.login.getBDUSS(),cuid:"1",success:function(){setTimeout(function(){e.addLocalSub()
},1e3)}}):(e.data=e.readFromLocal(),e.data?(e.addLocalSub(),e.triggerPageEvent("index,subscribe,searchsubscribe,managesubscribe,page,preview","subscribedatachange")):(e.data={tag:webappandroid.subscribe.getDefaultSubscribeData()},e.saveToLocal(),e.addLocalSub()))},getData:function(){return this.data},addSub:function(e,t,n){var a=this;a.isSubExists(e)?(a.moveSub(e.type,e.name,t),console.log("duplicated subscribe")):("number"==typeof t?a.data.tag.splice(t,0,e):("local"==e.type&&(e.name="本地"),"chosen"==e.type&&(e.name="推荐"),a.data.tag.push(e)),a.saveToLocal(),n||a.saveRemote())
},isMinimumSub:function(e){for(var t=0,n=e.length-1;n>=0;)"focus"!=e[n].type&&"beauty"!=e[n].type&&"meizitu"!=e[n].type&&t++,n--;return 2>t},removeSub:function(e,t,n){var a=this,i=a.data.tag;if(a.isMinimumSub(i))return a.tip("至少保留一个订阅项"),!1;for(var o=0;o<i.length;o++)if(i[o].type==e&&(i[o].name==t||"local"==e||"focus"==e||"chosen"==e))return i.splice(o,1),a.saveToLocal(),n||a.saveRemote(),!0;return!1},moveSub:function(e,t,n,a){for(var i,o=this,r=o.data.tag,s=0;s<r.length;s++)if(r[s].type==e&&r[s].name==t){i=r.splice(s,1),r.splice(n,0,i[0]),o.saveToLocal(),a||o.saveRemote();
break}},saveRemote:function(){var e=this;return e.isLoggedIn()?void(e.savingRemote||(e.savingRemote=!0,setTimeout(function(){e.model.save({bduss:webappandroid.login.getBDUSS(),cuid:"1",text:JSON.stringify(e.getDataToSaveRemote(e.data)),success:function(){e.savingRemote=!1}})},0))):void e.triggerPageEvent("index,subscribe,searchsubscribe,managesubscribe,page,preview","subscribedatachange")},isSubExists:function(e){for(var t=this,n=t.data.tag,a=n.length-1;a>=0;){if(n[a].name==e.name&&n[a].type==e.type&&("tag"!=e.type&&n[a].id==e.id||"tag"==e.type))return!0;
a--}return!1},readFromLocal:function(){var t=this,n=webappandroid.helper.localStorageTest(),a=null;if(n)try{a=JSON.parse(webappandroid.helper.localStorageGet(e))}catch(i){a=null}return t.fixData(a),a},fixData:function(e){if(e&&e.tag){for(var t=e.tag,n=!1,a=0;a<t.length;a++)"focus"==t[a].type&&t.splice(a,1),"chosen"==t[a].type&&(n=!0);return n||t.splice(0,0,{type:"chosen",name:"推荐"}),e}},getDataToSaveRemote:function(e){for(var t=e.tag.slice(0),n=0;n<t.length;n++)"chosen"==t[n].type&&(t[n].name="精选"),478===t[n].id&&(t[n].id="478"),"image"==t[n].type&&"1"!==t[n].id&&(t[n].id="1");
return{tag:t}},clearLocal:function(){var t=webappandroid.helper.localStorageTest();t&&webappandroid.helper.localStorageRemove(e)},saveToLocal:function(){var t=this,n=webappandroid.helper.localStorageTest(),a="";if(n)try{a=JSON.stringify(t.data),webappandroid.helper.localStorageSet(e,a)}catch(i){}},onsync:function(e){var t=this;e.attributes.tag&&(t.data=e.getData(),t.saveToLocal(),t.triggerPageEvent("index,subscribe,searchsubscribe,managesubscribe,page,preview","subscribedatachange"))},onroutechange:function(e){var t=e.from||null,n=e.to||null;
t&&t.action||null,n&&n.action||null,e.pageviews}})}(Zepto),!function(e){function t(e,t,n){e.style.webkitTransition=e.style.transition=n?" margin-top "+n+"s ease-out 0s":"none",e.style.marginTop="-"+t+"px"}rocket.subview.ui_hotword=rocket.subview.extend({className:"ui-hotword",tpl:'<div class="ui-hotword-left">\n<span>热点</span>\n</div>\n<ul class="ui-hotword-content">\n    <% _.each(list, function(item, index){ %>\n        <li class="ui-hotword-item" data-name="<%- item.title %>">\n            <span><%- item.title %></span>\n            <b class="ui-hotword-item-right"></b>\n        </li>\n    <% });  %>\n</ul>',events:{"click .ui-hotword-item":"onitemclick"},onitemclick:function(t){var n=e(t.currentTarget),a=n.data("name");
a&&(_ss({act:"hotword_click",act_data_1:"ui",act_data_2:a},!0),window.location.href=webappandroid.conf.getSearchUrl(a))},init:function(){var e=this;e.moveIndex=0,e.animTime=1e3,e.waitTime=3e3,e.perheight=28,e.itemLength=0,e.curTimeHandler=null,e.isFirstRender=!0,e.subscribeName=webappandroid.subscribe.getSubscribeName(e.options.type)||"推荐",e.model=new rocket.model.hotword,e.model.fetch({subname:e.subscribeName})},registerEvents:function(){var e=this,t=e.ec;t.on("pagebeforechange",e.onpagebeforechange,e),e.model.on("databack",e.render,e)
},unregisterEvents:function(){var e=this,t=e.ec;e.subec,e.stop(),t.off("pagebeforechange",e.onpagebeforechange,e),e.model.off("databack",e.render,e)},onpagebeforechange:function(e){var t=this,n=e.to,a=e.from;e.params,n==t.ec?null!=t.curTimeHandler||t.isFirstRender||t.start():a==t.ec&&null!=t.curTimeHandler&&t.stop()},setTrans:function(e,n){var a=this;a.moveIndex=e;var i=e*a.perheight;t(a.ul,i,n)},process:function(){var e=this,t=e.moveIndex+1;t<=e.itemLength&&e.setTrans(t,e.animTime/1e3),t>=e.itemLength?e.curTimeHandler=setTimeout(function(){e.setTrans(0),e.start(e.waitTime)
},e.animTime):e.start(e.waitTime+e.animTime)},stop:function(){var e=this;e.curTimeHandler&&(clearTimeout(e.curTimeHandler),e.curTimeHandler=null)},start:function(e){var t=this;t.curTimeHandler=setTimeout(function(){t.process()},e||t.waitTime)},render:function(e){var t,n,a=this;e&&e.length&&(a.stop(),a.$el.html(_.template(a.tpl,{list:e})),a.isFirstRender=!1,a.$ul=a.$("ul"),a.ul=a.$ul[0],t=a.ul.getElementsByTagName("li"),n=a.itemLength=t.length,0!=n&&(n>1&&(a.ul.insertBefore(t[n-1].cloneNode(!0),t[0]),a.setTrans(1),a.start(a.waitTime)),a.show()))
}})}(Zepto),!function(e){var t={EDITOR:0,TOPIC:1,REASON:2,CONTENT_VIDEO:30,CONTENT_AUTIO:31,CONTENT_IMAGE:32,TOP:4,HOT:5,RECOMMAND:6,AREA:7,TAG:8},n={FILL_BLUE:0,FILL_RED:1,STROKE_BLUE:2};rocket.subview.index_subpage_list=rocket.subview.extend({className:"index-list",imagetpl:'<% _.each(list, function(news, index){ %>\n<div class="index-list-mediaitem <% if(!news.imageurls || news.imageurls && !news.imageurls.length || webappandroid.MODE_NOIMAGE.showImage != 1){ %> no-image <% } %>" \n    data-id="<%= news.nid %>" \n    data-src="<%= news.url%>" \n    data-title="<%- news.title%>"\n    data-site="<%- news.site%>" \n    data-time="<%= news.ts%>"\n    data-type="<%= news.type%>"\n    <% if(news.z_id){ %>\n        data-zid="<%= news.z_id %>"\n    <% } %>\n    data-displaytype="<%= news.display_type || 1%>"\n    data-displayurl="<%= news.display_url || \'\'%>"\n    >\n    <% if( news.imageurls && news.imageurls.length && news.imageurls[0]) { %>\n    <div class="index-list-image"><div class="lazy-load" data-url="<%= news.imageurls[0].url %>"></div></div>\n    <% } %>\n    <div class="index-list-main-text">\n        <div class="index-list-main-up">\n            <span><em><%= news.count.up || 0 %></em><b>+1</b></span>\n        </div>\n        <div class="index-list-main-title"><%- news.title %></div>\n        <div class="index-list-main-abs"><%- news.abs %></div>\n\n    </div>\n</div>\n<% }); %>\n',tpl:'<% _.each(list, function(news, index){ %>\n    <%\n        /*无图-包含单图&三图*/\n        var isnoimage=(!news.imageurls || !news.imageurls.length || webappandroid.MODE_NOIMAGE.showImage != 1);\n        /*媒体转载*/\n        var isfwtimesshow=(list.isPreviewNews && news.forward_times);\n        /*三图-媒体转载需要保证高度一致，故统一不显示三图*/\n        var isalbumshow=(!isnoimage && news.imageurls.length>=3 && !isfwtimesshow);\n        /*单图*/\n        var isimageshow=(!isnoimage && news.imageurls.length && !isalbumshow && news.imageurls[0].url);\n        /*专题*/\n        var istopicshow=(!news.istopnews && news.z_info && news.type=="z" && index!=0);\n        /*转码页*/\n        var isthirdpage=(news.display_type!==1);\n        /*是否显示更多行文字，有图是两行，无图三行，为保证转载高度，转载统一一致*/\n        var isshowmoretext=(isnoimage&&!isfwtimesshow);\n        /*是否有视频*/\n        var hasvideo = (news.content_type && news.content_type.video && news.content_type.video==1);\n    %>\n    <div class="index-list-item  <% if(istopicshow) { %> istopic <% } %> <% if(isnoimage){ %> no-image <% } %>"\n        data-id="<%= news.nid %>"\n        data-src="<%= news.url%>" \n        data-title="<%- news.title%>"\n        data-site="<%- news.site%>" \n        data-time="<%= news.ts%>"\n        data-type="<%= news.type%>"\n        <% if(news.z_id){ %>\n            data-zid="<%= news.z_id %>"\n        <% } %>\n        <% if(news.ext){ %>\n            data-ext=\'<%= JSON.stringify(news.ext) %>\'\n        <% } %>\n        data-displaytype="<%= news.display_type || 1%>"\n        data-displayurl="<%= news.display_url || \'\'%>"\n    >\n\n    <% if(istopicshow) { %>\n        <div class="index-list-topic">\n\n    <div class="index-list-topic-head">\n        <%= news.z_info.title||news.title %>\n    </div>\n\n    <% if(news.z_info.head && webappandroid.MODE_NOIMAGE.showImage && news.z_info.head.imageurls  && news.z_info.head.imageurls.length && news.z_info.head.imageurls[0].url){ %>\n    <div class="index-list-topic-bigimage inneritem"\n         data-src="<%= encodeURIComponent(news.z_info.head.url)%>"\n         data-title="<%= encodeURIComponent(news.z_info.head.title)%>"\n         data-site="<%= encodeURIComponent(news.z_info.head.site)%>"\n         data-time="<%= news.z_info.head.ts%>"\n         data-displaytype="<%= news.z_info.head.display_type || 1%>"\n         data-displayurl="<%= news.z_info.head.display_url || \'\'%>"\n         data-type="<%= news.z_info.head.type%>"\n         data-id="<%= news.z_info.head.nid%>">\n        <img class="lazy-load" data-url="<%= news.z_info.head.imageurls[0].url %>">\n    </div>\n    <% } %>\n\n    <div class="index-list-topic-list">\n        <% if(news.z_info.head && news.z_info.head.title){ %>\n        <div class="index-list-topic-item inneritem"\n             data-src="<%= encodeURIComponent(news.z_info.head.url)%>"\n             data-title="<%= encodeURIComponent(news.z_info.head.title)%>"\n             data-site="<%= encodeURIComponent(news.z_info.head.site)%>"\n             data-time="<%= news.z_info.head.ts%>"\n             data-displaytype="<%= news.z_info.head.display_type || 1%>"\n             data-displayurl="<%= news.z_info.head.display_url || \'\'%>"\n             data-type="<%= news.z_info.head.type%>"\n             data-id="<%= news.z_info.head.nid%>">\n            <%= news.z_info.head.title %>\n        </div>\n        <% } %>\n\n        <% if(news.z_info.news && news.z_info.news.length){ %>\n            <% _.each(news.z_info.news.slice(0,2), function(item, index){ %>\n                <% if(item && item.title){ %>\n                <div class="index-list-topic-item inneritem"\n                     data-src="<%= encodeURIComponent(item.url)%>"\n                     data-title="<%= encodeURIComponent(item.title)%>"\n                     data-site="<%= encodeURIComponent(item.site)%>"\n                     data-time="<%= item.ts%>"\n                     data-displaytype="<%= item.display_type || 1%>"\n                     data-displayurl="<%= item.display_url || \'\'%>"\n                     data-type="<%= item.type%>"\n                     data-id="<%= item.nid%>">\n                    <%= item.title %>\n                </div>\n                <% } %>\n            <% }); %>\n        <% } %>\n    </div>\n\n\n    <div class="index-list-topic-entry">\n        进入专题<i class="anchor-right"></i>\n    </div>\n\n</div>\n    <% }else { %>\n        <% if(isfwtimesshow) { %>\n        <div class="index-list-right">\n    <div class="index-list-previewnews-forward" <% if(news.forward_times) { %> data-nid="<%- news.nid%>" <% } %> >\n        <div class="forward-title">\n            转载\n        </div>\n        <div class="forward-count">\n            <%- news.forward_times?news.forward_times:0 %>\n        </div>\n    </div>\n</div>\n        <% } %>\n        <div  class="index-list-main <% if(isshowmoretext) { %> moretext <% } %> <% if(isimageshow) { %> showleft <% } %> <% if(isfwtimesshow) { %> showright <% } %> <%if(hasvideo) { %> hasvideo <% } %>">\n            <% if(isimageshow) { %>\n            <% if(news.type != \'ads_feed\') { %>\n<div class="index-list-image">\n	<i class="ivideoplay"></i>\n    <div class="lazy-load" data-url="<%= news.imageurls[0].url %>"></div>\n</div>\n<% } else { %>\n<div class="index-list-image" >\n    <img src="<%= news.imageurls[0].url %>" onerror="$(this).closest(\'.index-list-image\').hide();">\n      <!-- <div class="lazy-load" data-url="<%= news.imageurls[0].url %>"></div> -->\n</div>\n<% } %>\n\n            <% } %>\n            <div class="index-list-main-text">\n    <div class="index-list-main-title"><%- news.title %></div>\n    <% if(!isalbumshow) { %>\n    <div class="index-list-main-abs"><%- news.abs %></div>\n    <% } %>\n</div>\n            <% if(isalbumshow) { %>\n            <div class="index-list-album-container">\n    <div class="index-list-album">\n        <div class="index-list-album-wrapper one">\n            <div class="lazy-load" data-url="<%= news.imageurls[0].url %>"></div>\n        </div>\n    </div>\n    <div class="index-list-album">\n        <div class="index-list-album-wrapper two">\n            <div class="lazy-load" data-url="<%= news.imageurls[1].url %>"></div>\n        </div>\n    </div>\n    <div class="index-list-album">\n        <div class="index-list-album-wrapper three">\n            <div class="lazy-load" data-url="<%= news.imageurls[2].url %>"></div>\n        </div>\n    </div>\n</div>\n\n            <% } %>\n            <div class="index-list-bottom">\n    <div class="index-list-main-time">\n\n    <% if(news && news.type == \'ads_feed\'){ %>\n    <b class="tip-ad">推广</b>\n    <% } else if(news && news.showtype){ %>\n\n        <% if(news.showtype.type == \'1\'){ %>\n        <b class="tip-topic <%- news.showtype.style %>"><%- news.showtype.text %></b>\n\n        <% } else if(news.showtype.type == \'2\'){ %>\n        <b class="tip-reason <%- news.showtype.style %>"><%- news.showtype.text %></b>\n\n        <% } else if(news.showtype.type == \'3\'){ %>\n        <b class="tip-contenttype <%- news.showtype.style %>"><%- news.showtype.text %></b>\n\n        <% } else if(news.showtype.type == \'4\'){ %>\n        <b class="tip-topnews <%- news.showtype.style %>"><%- news.showtype.text %></b>\n\n        <% } else if(news.showtype.type == \'5\'){ %>\n        <b class="tip-hot <%- news.showtype.style %>"><%- news.showtype.text %></b>\n\n        <% } else if(news.showtype.type == \'6\'){ %>\n        <b class="tip-recommend <%- news.showtype.style %>"><%- news.showtype.text %></b>\n\n        <% } else if(news.showtype.type == \'7\'){ %>\n        <b class="tip-area tip-tag <%- news.showtype.style %>">\n            <%- news.showtype.text %>\n            <div class="tip-tag-trigger" data-name="<%- news.showtype.text %>" data-extra="<%- news.showtype.extra %>"></div>\n        </b>\n\n        <% } else if(news.showtype.type == \'8\'){ %>\n        <b class="tip-tag <%- news.showtype.style %>">\n            <%- news.showtype.text %>\n            <div class="tip-tag-trigger" data-name="<%- news.showtype.text %>"></div>\n        </b>\n        <% } %>\n\n    <% } %>\n\n    <% if(news.site){ %>\n    <b class="index-list-main-site"><%- news.site %></b>\n    <% } %>\n\n    <% if(news.pulltime || news.ts){ %>\n    <b class="tip-time">\n        <%= webappandroid.helper.getFormatedDate(news.pulltime || news.ts,1) %>\n    </b>\n    <% } %>\n\n</div>\n</div>\n        </div>\n    <% } %>\n\n    </div>\n<% }); %>\n\n',events:{"click .index-list-item":"onitemclick","click .index-list-main-up":"onupboxclick","click .index-list-mediaitem":"onimageitemclick"},init:function(t){var n=this;
n.data=t.data||[],n.type=t.type,n.smtLogInfo=webappandroid.smtlog.getSMTLogInfo(n.type),n.isFirstRender=!0,n.model=new rocket.model.article_support({},e.extend({},t)),n.render()},getNewsReason:function(e){if("info"==e.type)return null;var n=/:百家/.test(window.decodeURIComponent(window.location.href));if(e&&e.topic&&e.topic.length)for(var a=0;a<e.topic.length;a++)if(e.topic[a]&&"reason"==e.topic[a].type&&e.topic[a].name){if(n&&/百家/.test(e.topic[a].name))continue;return{text:e.topic[a].name,type:t.REASON}
}return null},getNewsArea:function(e){if(e&&e.topic&&e.topic.length)for(var n=0;n<e.topic.length;n++)if(e.topic[n]&&"area"==e.topic[n].type&&e.topic[n].name&&null!=e.topic[n].id)return{text:e.topic[n].name,type:t.AREA,extra:e.topic[n].id};return null},getContentType:function(){return null},getNewsTag:function(e){if(e&&e.tag&&e.tag.length)for(var n=0;n<e.tag.length;n++){var a=e.tag[n];try{if(!new RegExp(":"+a,"i").test(decodeURIComponent(window.location.hash)))return{text:a,type:t.TAG}}catch(i){continue
}}return null},getShowNewsType:function(e){var a=null,i=null,o=null,r=null,s=null;switch(e&&(r="hot"==e.type?n.FILL_RED:n.FILL_BLUE,"z"==e.type?(i="专题",a=t.TOPIC,r=n.FILL_RED):(s=this.getNewsReason(e))?(i=s.text,a=s.type):(s=this.getContentType(e))?(i=s.text,a=s.type):e.istopnews?(i="置顶",a=t.TOP,r=n.FILL_RED):"hot"==e.type?(i="热点",a=t.HOT):"recommend"==e.type?(i="推荐",a=t.RECOMMAND):(s=this.getNewsArea(e))?(i=s.text,a=s.type,o=s.extra,r=n.STROKE_BLUE):(s=this.getNewsTag(e))&&(i=s.text,a=s.type,r=n.STROKE_BLUE)),r){case 1:r="tip-fillred";
break;case 2:r="tip-strokeblue";break;default:r="tip-fillblue"}if(null!=r&&null!=i&&null!=a){var c={style:r,text:i,type:a,extra:o};return c}return null},render:function(){var t=this,n=webappandroid.subscribe.getNewsType(t.type),a="image"==n?t.imagetpl:t.tpl;if(t.data&&t.data.length)for(var i=0;i<t.data.length;i++)t.data[i].showtype=this.getShowNewsType(t.data[i]);t.isFirstRender?(t.isFirstRender=!1,t.$el.html(_.template(a,{list:t.data})),t.show()):t.$el.append(_.template(a,{list:t.data})),setTimeout(function(){t.subec.$(".lazy-load").imglazyload({threshold:100}).on("loadcomplete",function(t,n){var a=this;
n&&webappandroid.helper.getImgNaturalDimensions(n,function(t){t&&t.w<10&&t.h<10&&e(a).closest(".index-list-image").hide()})})},20),t.sendRecommendStat(),setTimeout(t.hidevideoicon,500)},hidevideoicon:function(){var t=window.navigator.userAgent;if(t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)){var n=t.split("iPhone OS ")[1].split(" like")[0];7==parseInt(n.split("_")[0])&&parseInt(n.split("_")[1])>0?e(".hasvideo.showleft .ivideoplay").show():parseInt(n.split("_")[0])>7&&e(".hasvideo.showleft .ivideoplay").show()
}else if(t.indexOf("Android")>-1||t.indexOf("Linux")>-1){var n=t.split("Android")[1].match(/\d+/g);4==parseInt(n[0])&&parseInt(n[1])>0?e(".hasvideo.showleft .ivideoplay").show():parseInt(n[0])>4&&e(".hasvideo.showleft .ivideoplay").show()}},registerEvents:function(){var e=this,t=e.ec,n=e.subec;n.on("loadmoredataready",e.onloadmoredataready,e),t.on("pageopend",e.onpageopend,e)},unregisterEvents:function(){var e=this,t=e.ec,n=e.subec;n.off("loadmoredataready",e.onloadmoredataready,e),t.off("pageopend",e.onpageopend,e)
},onloadmoredataready:function(e){var t=this;t.data=e.data||t.data,t.render()},onpageopend:function(e){var t=this;if(e){var n=t.$el.find('div[data-id="'+e+'"]');n&&n.length&&n.addClass("touched")}},onforwardclick:function(t){var n=this,a=e(t.target).closest(".index-list-previewnews-forward"),i=a.data("nid");i&&(n.navigate("#preview/forward:"+i+":"+encodeURIComponent("转载媒体")),_ss({act:"forward_click"}))},ontagclick:function(e,t){var n,a=this;if(n=t.data("name")){var i=["#preview","tag:"+encodeURIComponent(n)].join("/");
a.navigate(i),window.scrollTo(0,0),_ss({act:"index_tag_click",act_data_1:n})}},openpage:function(e){var t,n=this,a=e.data("id"),i=e.data("site")||"百度新闻",o=e.data("time"),r=e.data("title"),s=e.data("zid"),c=e.data("displaytype"),d=e.data("src")||"emptyurl:"+a,l=e.data("type"),u=e.data("displayurl"),p=n.smtLogInfo,h=e.data("ext");try{h=JSON.parse(h)}catch(g){console.log("rocket.subview.index_subpage_list JSON parse error line 151")}e.addClass("touched"),3==c&&u?(setTimeout(function(){location.href=u+(/\?/.test(u)?"&":"?")+"bdnews_webapp=1"
},100),_ss({act:"go_outside_hezuo",act_data_1:r,act_data_2:u})):2==c&&u?"ads_feed"!=l&&(webappandroid.helper.isQQ()||webappandroid.helper.isWeiXin()||webappandroid.helper.isBaiduBox()?location.href=u:window.open(u),_ss({act:"go_outside",act_data_1:r,act_data_2:u})):(t=["#page",n.options.openFromPage?"3":encodeURIComponent(n.options.type),encodeURIComponent(d),encodeURIComponent(r),encodeURIComponent(i),encodeURIComponent(o)].join("/"),a&&(t+="/"+a),s&&(t="#topic/"+s),_ss({act:"go_artical",act_data_1:r,act_data_2:d}),"page"==n.ec.action&&_smt(46,{column:p.column,nid:n.options.nid,tag:p.tag,relatednid:a,ext:h||""}),n.navigate(t));
var f=webappandroid.smtlog.getSMTLogInfo(n.options.type,l);_smt(3,{column:1,nid:a,tag:f.tag,pos:e.index(),mark:f.mark,ext:h||""})},onitemclick:function(t){var n=this,a=e(t.currentTarget),i=e(t.target),o=i.closest(".index-list-previewnews-forward"),r=i.closest(".inneritem"),s=i.closest(".tip-tag-trigger");1==o.length?n.onforwardclick(t):1==s.length?n.ontagclick(t,s):1==r.length?n.openpage(r):1==a.length&&n.openpage(a)},sendRecommendStat:function(){for(var e=this,t=e.data,n=0;n<t.length;n++)if("recommend"==t[n].type){_ss({act:"index_has_recommend",act_data_1:e.options.type});
break}},onimageitemclick:function(t){var n=this,a=e(t.currentTarget);if(a.data("index"),n.stopPropagation)return n.stopPropagation=!1,!1;var n=this,i=e(t.currentTarget),o=i.data("id"),r=(i.data("site")||"百度新闻",i.data("time"),i.data("title"),i.data("zid"),i.data("displaytype"),i.data("src")||"emptyurl:"+o,n.options.type);i.data("displayurl"),_ss({act:"onimageitemclick"}),n.navigate(["#image",encodeURIComponent(r),o,0].join("/"))},doVote:function(e){var t=e.find("em"),n=t.html();t.html(n.replace(/\d+/g,function(e){return e-0+1
}));var a=setTimeout(function(){e.removeClass("pressed"),e.find("b").show().css({top:0,opacity:"0"}).animate({top:"-25px",opacity:1},300,"ease-out"),setTimeout(function(){e.find("b").hide().css("top","0")},500),window.clearTimeout(a)},200)},onupboxclick:function(t){var n=this,a=e(t.currentTarget),i=e(t.currentTarget).closest(".index-list-mediaitem"),o=i.data("id");i.data("uped")||(i.data("uped",!0),n.stopPropagation=!0,n.doVote(a),t.preventDefault(),t.stopPropagation(),n.model.fetch({nid:o,supporttype:"up"}),_ss({act:n.ec.action,act_data_1:"onupboxclick"}))
}})}(Zepto);